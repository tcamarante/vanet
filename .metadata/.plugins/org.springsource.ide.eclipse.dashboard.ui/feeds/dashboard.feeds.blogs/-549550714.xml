<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Spring</title>
  <link rel="alternate" href="https://spring.io/blog" />
  <link rel="self" href="https://spring.io/blog.atom" />
  <id>http://spring.io/blog.atom</id>
  <icon>https://spring.io/favicon.ico</icon>
  <updated>2014-12-10T00:49:00Z</updated>
  <entry>
    <title>This Week in Spring - December 9th, 2014</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/10/this-week-in-spring-december-9th-2014" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2014-12-10:1884</id>
    <updated>2014-12-10T00:49:00Z</updated>
    <content type="html">&lt;p&gt;Welcome to another installment of &lt;em&gt;This Week in Spring&lt;/em&gt;! Can you believe we're staring the end of the month (and indeed the year!) down already? Time sure flies when you're having fun, eh?&lt;/p&gt;

&lt;p&gt;This week I'm in Los Angeles talking to teams here at the Pivotal Labs L.A. office about projects they're doing for customers involving Spring and Spring Boot and then it's off to see our pals at TicketMaster. (If you're in the area and want to talk shop, &lt;a href="http://twitter.com/starbuxman"&gt;ping me on Twitter &lt;/a&gt;.)&lt;/p&gt;

&lt;p&gt;We've got a lot of stuff to cover this week. Notably, Pieter Humphrey has (as always) slaved over a hot transcoder to get a &lt;em&gt;lot&lt;/em&gt; of great Spring XD content up and available as replays this week. Don't miss out!&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  Want the definitive &lt;em&gt;start here&lt;/em&gt; talk for Spring XD? Check out this SpringOne2GX 2014 replay of Spring XD co-leads Dr. Mark Pollack and Mark Fisher's talk, &lt;a href="http://spring.io/blog/2014/12/09/springone2gx-2014-replay-develop-powerful-big-data-applications-easily-with-spring-xd"&gt;&lt;em&gt;Develop powerful Big Data Applications easily with Spring XD&lt;/em&gt;&lt;/a&gt;&lt;br&gt;
&lt;/li&gt;
&lt;li&gt;  Spring framework committer &lt;a href="http://spring.io/blog/2014/12/09/spring-framework-4-1-3-released"&gt;Stéphane Nicoll has just announced Spring framework 4.1.3&lt;/a&gt;. Upgrade recommended!&lt;/li&gt;
&lt;li&gt;  Join Gary Russell on Jan 27th as he shows new reasons why Spring Integration leads the ESB/Integration Framework market (2014 DZone research): &lt;a href="http://spring.io/blog/2014/12/02/webinar-introducing-the-java-dsl-for-spring-integration"&gt;Introducing the Java DSL for Spring Integration&lt;/a&gt;. &lt;/li&gt;
&lt;li&gt;  Is in-memory your thing?  Join Luke Shannon Jan 13th and learn about how Spring MVC/Spring Boot applications can leverage GemFire for persistence in his talk &lt;a href="http://spring.io/blog/2014/12/02/webinar-building-scalable-data-applications-with-spring-and-gemfire"&gt;Building Scalable Data Applications with Spring and GemFire&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;  Spring ninja Roy Clarkson has just announced that &lt;a href="http://spring.io/blog/2014/12/09/spring-for-android-2-0-0-m2-released"&gt;Spring for Android M2 is now available&lt;/a&gt;. The new release is packed with new features so check it out now!&lt;/li&gt;
&lt;li&gt;  The &lt;em&gt;Java Advent Calendar&lt;/em&gt; has a nice post on how to &lt;a href="http://www.javaadvent.com/2014/12/creating-rest-api-with-spring-boot-and.html"&gt;build a simple Java application using Spring Boot and MongoDB&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;  I was giving a workshop last Friday with &lt;a href="http://twitter.com/mstine"&gt;my pal Matt Stine&lt;/a&gt; on how to build microservices with Spring ("what even is... cloud?"). We had numerous great questions from the audience, but at one point we had this whole discussion over how data gets integrated across numerous microservices. Matt and I talked about approaches like CQRS, and I wish we had recorded that part of that discussion because it was a lot of fun. Our pal Chris Richardson, however, &lt;a href="http://www.infoq.com/interviews/cqrs-docker-richardson"&gt; just appeared on InfoQ with an interview on using CQRS for microservices&lt;/a&gt;. So check &lt;em&gt;that&lt;/em&gt; out, instead!&lt;/li&gt;
&lt;li&gt;  Our pal Manuel Jordan's back at it, this time with a review of &lt;a href="http://manueljordanelera.blogspot.com/2014/12/book-review-learning-spring-boot.html"&gt;Spring team member Greg Turnquist's new book, &lt;em&gt;Learning Spring Boot&lt;/em&gt;&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;  Basel Almustafa put together a nice post on how to use Spring Security to secure a web application. I'd probably have used the (in my humble opinion more flexible) &lt;a href="http://www.dzone.com/articles/integrating-spring-security"&gt;Java configuration DSL, but the approach outlined here is certainly tried and true&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;  I liked Jimmy Liu's slide-deck, &lt;a href="http://www.slideshare.net/gn00023040/bootify-your-spring-application"&gt;&lt;em&gt;Bootify Your Spring Applications&lt;/em&gt;&lt;/a&gt;, you might too&lt;/li&gt;
&lt;li&gt;  Tobias Flohre has put together a &lt;em&gt;very&lt;/em&gt; nice post on &lt;a href="https://blog.codecentric.de/en/2014/11/extending-spring-boot-five-steps-writing-spring-boot-starter/"&gt;how to write your own Spring Boot starter&lt;/a&gt;&lt;br&gt;
&lt;/li&gt;
&lt;li&gt;  Check out the replay of &lt;a href="http://spring.io/blog/2014/12/09/springone2gx-2014-replay-spring-xd-a-guided-tour"&gt;Patrick Peralta's and David Turanski's SpringOne2GX talk, &lt;em&gt;Spring XD: a guided tour&lt;/em&gt;&lt;/a&gt;, now available as a replay&lt;/li&gt;
&lt;li&gt;  Check out Carlos Queiroz's SpringOne2GX 2014 talk, &lt;a href="http://spring.io/blog/2014/12/09/springone2gx-2014-replay-implementing-the-lambda-architecture-with-spring-xd"&gt;&lt;em&gt;Implementing the Lambda Architecture with Spring XD&lt;/em&gt;&lt;/a&gt;, is now available as a replay&lt;/li&gt;
&lt;li&gt;  If you missed it, Vineet Goel, Girish Lingappa, and Rodrigo Meneses' talk from SpringOne2GX, &lt;a href="http://spring.io/blog/2014/12/09/springone2gx-2014-replay-spring-xd-for-real-time-hadoop-workload-analysis"&gt;&lt;em&gt;Spring XD for real-time Hadoop Workload Analysis&lt;/em&gt;&lt;/a&gt;, is now available online&lt;/li&gt;
&lt;/ul&gt;</content>
  </entry>
  <entry>
    <title>Spring Framework 4.1.3 released</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/09/spring-framework-4-1-3-released" />
    <category term="releases" label="Releases" />
    <author>
      <name>Stéphane Nicoll</name>
    </author>
    <id>tag:spring.io,2014-12-09:1877</id>
    <updated>2014-12-09T13:14:00Z</updated>
    <content type="html">&lt;p&gt;On behalf of the team I am pleased to announce the immediate availability of Spring Framework 4.1.3.&lt;/p&gt;

&lt;p&gt;Spring Framework 4.1.3 is our third maintenance release in the 4.1.x line and comes with &lt;a href="https://jira.spring.io/issues/?jql=fixVersion%3D4.1.3%20AND%20project%3DSPR"&gt;over 50 fixes and improvements&lt;/a&gt;. It was initially scheduled for late December but we decided to release it early to incorporate user-suggested and user-contributed improvements right in time for the scheduled Spring Boot 1.2 release this week.&lt;/p&gt;

&lt;p&gt;We are still planning on another release later this month (4.1.4) at which point 4.1.x will turn into a maintenance branch, with active development on 4.2 happening on master.&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>SpringOne2GX 2014 Replay: Spring XD - A Guided Tour</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/09/springone2gx-2014-replay-spring-xd-a-guided-tour" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-09:1881</id>
    <updated>2014-12-09T13:09:00Z</updated>
    <content type="html">&lt;p&gt;Spring XD - A Guided Tour&lt;/p&gt;

&lt;p&gt;Recorded at SpringOne2GX 2014. &lt;/p&gt;

&lt;p&gt;Speakers: Patrick Peralta, David Turanski &lt;/p&gt;

&lt;p&gt;Big Data Track &lt;/p&gt;

&lt;p&gt;Slides: &lt;a href="http://www.slideshare.net/SpringCentral/spring-xd-guided-tour"&gt;http://www.slideshare.net/SpringCentral/spring-xd-guided-tour&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;What happens when a Stream is deployed to a Spring XD cluster? How does Stream processing and data partitioning work? How does the cluster recover when a Spring XD container goes down? How does Spring XD create and manage application contexts? What is a Plugin? How does Spring XD support extensibility? Our experienced guides will take you on a tour of the Spring XD runtime environment, navigating Streams and observing how Modules thrive in their natural habitat. We will explore the role of ZooKeeper, Spring Integration, and Spring Boot through beautiful panoramas, code samples, and daring demonstrations.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;&lt;iframe width="560" height="315" src="//www.youtube.com/embed/lteee9N816k" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;</content>
  </entry>
  <entry>
    <title>SpringOne2GX 2014 Replay: Implementing the Lambda Architecture with Spring XD</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/09/springone2gx-2014-replay-implementing-the-lambda-architecture-with-spring-xd" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-09:1880</id>
    <updated>2014-12-09T13:01:00Z</updated>
    <content type="html">&lt;p&gt;Recorded at SpringOne2GX 2014. &lt;/p&gt;

&lt;p&gt;Speaker: Carlos Queiroz &lt;/p&gt;

&lt;p&gt;Slides: &lt;a href="http://www.slideshare.net/SpringCentral/spring-one2gx-2014carlosqueiroz"&gt;http://www.slideshare.net/SpringCentral/spring-one2gx-2014carlosqueiroz&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Big Data Track&lt;/p&gt;

&lt;p&gt;The lambda architecture has been proposed as a general purpose data system that aims to solve the problem of computing arbitrary functions on an arbitrary dataset in (near) real-time. In this talk we introduce the lambda architecture and show how it can be implemented with SpringXD, GemFireXD and Hadoop (HDFS and MapReduce) as the foundation of the architecture implementation. To validate the architecture we introduce a CDR (Call Detail Record) mining application as use case of the lambda architecture. We finalise by showing a demo of the CDR (Call Detail Record) mining application.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;&lt;iframe width="560" height="315" src="//www.youtube.com/embed/tjwW9oWkH0Q" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;</content>
  </entry>
  <entry>
    <title>SpringOne2GX 2014 Replay: Spring XD for Real-time Hadoop Workload Analysis</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/09/springone2gx-2014-replay-spring-xd-for-real-time-hadoop-workload-analysis" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-09:1879</id>
    <updated>2014-12-09T12:58:00Z</updated>
    <content type="html">&lt;p&gt; Recorded at SpringOne2GX 2014. &lt;/p&gt;

&lt;p&gt;Speakers: Vineet Goel, Girish Lingappa, Rodrigo Meneses &lt;/p&gt;

&lt;p&gt;Slides: &lt;a href="http://www.slideshare.net/SpringCentral/spring-one2gx-2014springxdhadoopworkloadanalysis"&gt;http://www.slideshare.net/SpringCentral/spring-one2gx-2014springxdhadoopworkloadanalysis&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Big Data Track &lt;/p&gt;

&lt;p&gt;As Hadoop goes mainstream in enterprise big data deployments, IT organizations expect and demand enhanced operational management of their Hadoop clusters in production. Admins require more than just cluster health monitoring; they need the ability to do real time workload analysis for performance tuning and troubleshooting. Real-time log analysis of jobs at a user or application level can allow admins to manage and tune workloads better, especially in multi-tenancy Hadoop cluster services. Join us to learn how Pivotal team leveraged Spring XD data ingestion and batch processing framework, GemFire XD &amp;amp; other components to solve this interesting challenge on a large 1000-node (Analytics Workbench) cluster. Using Spring XD to ingest YARN service and MapReduce application logs through a real-time data pipeline into HDFS, the team leveraged familiar SQL-based queries to analyze fine-grained cluster utilization.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;&lt;iframe width="560" height="315" src="//www.youtube.com/embed/cBcznXjL840" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;</content>
  </entry>
  <entry>
    <title>SpringOne2GX 2014 Replay:  Develop powerful Big Data Applications easily with Spring XD</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/09/springone2gx-2014-replay-develop-powerful-big-data-applications-easily-with-spring-xd" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-09:1878</id>
    <updated>2014-12-09T12:55:00Z</updated>
    <content type="html">&lt;p&gt; Recorded at SpringOne2GX 2014. &lt;/p&gt;

&lt;p&gt;Speakers: Mark Fisher and Mark Pollack &lt;/p&gt;

&lt;p&gt;Slides: &lt;a href="http://www.slideshare.net/SpringCentral/develop-powerful-big-data-applications-easily-with-springxd"&gt;http://www.slideshare.net/SpringCentral/develop-powerful-big-data-applications-easily-with-springxd&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Big Data Track &lt;/p&gt;

&lt;p&gt;Spring XD aims to provide a one stop shop for writing and deploying Big Data Applications. It provides a scalable, fault tolerant, distributed runtime for Data Ingestion, Analytics, and Workflow Orchestration using a single programming, configuration and extensibility model. By not requiring developers to rationalize all of this themselves across the many different solutions available today, Spring XD greatly reduces the inherent complexity of Big Data development. It's all built on proven projects like Spring Integration, and Spring Batch. You'll see for yourself how this heritage combines to provide a scalable runtime environment, that is easily configured and assembled via a simple DSL.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;&lt;iframe width="560" height="315" src="//www.youtube.com/embed/mcJXjxZ3f9k" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;</content>
  </entry>
  <entry>
    <title>Spring for Android 2.0.0.M2 released</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/09/spring-for-android-2-0-0-m2-released" />
    <category term="releases" label="Releases" />
    <author>
      <name>Roy Clarkson</name>
    </author>
    <id>tag:spring.io,2014-12-09:1876</id>
    <updated>2014-12-09T09:21:46Z</updated>
    <content type="html">&lt;p&gt;I am pleased to announce that Spring for Android 2.0.0.M2 is now available in the Spring milestone repository. Highlights include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Support for the Android port of &lt;a href="https://hc.apache.org/httpcomponents-client-4.3.x/android-port.html"&gt;HttpClient 4.3&lt;/a&gt; via HttpComponentsClientHttpRequestFactory&lt;/li&gt;
&lt;li&gt;Support for HttpClient 4.0 included with Android is now deprecated but will remain available through HttpComponentsAndroidClientHttpRequestFactory.&lt;/li&gt;
&lt;li&gt;HTTP PATCH support in RestTemplate&lt;/li&gt;
&lt;li&gt;The type conversion package from Spring Core is now available in Spring for Android Core.&lt;/li&gt;
&lt;li&gt;Many improvements and fixes from Spring 3.2 are now merged into Spring for Android to bring baseline compatibility to Spring 3.2, while certain RestTemplate features from Spring 4.1 have been included to support the new HttpClient.&lt;/li&gt;
&lt;li&gt;Other bug fixes and improvements&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;
&lt;a id="user-content-httpclient-43" class="anchor" href="#httpclient-43" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;HttpClient 4.3&lt;/h3&gt;

&lt;p&gt;If HttpClient 4.3 for Android is available on the classpath it will be configured as the default HTTP client. Include the following dependency in your &lt;code&gt;build.gradle&lt;/code&gt; to utilize the new HttpClient.&lt;/p&gt;

&lt;div class="highlight highlight-groovy"&gt;&lt;pre&gt;dependencies {
    compile &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;'&lt;/span&gt;org.apache.httpcomponents:httpclient-android:4.3.5&lt;span class="pl-pds"&gt;'&lt;/span&gt;&lt;/span&gt;
}&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;
&lt;a id="user-content-minimum-version" class="anchor" href="#minimum-version" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;Minimum Version&lt;/h3&gt;

&lt;p&gt;The minimum supported version is Android 2.2 (API level 8), however it now accounts for 0.5% of Android devices on the Android developer &lt;a href="https://developer.android.com/about/dashboards/index.html"&gt;Dashboards&lt;/a&gt;. We recommend Android 2.3 as a minimum target for new apps, as third-party libraries such as Jackson 2.4 and OkHttp require Android 2.3 and newer.&lt;/p&gt;

&lt;h3&gt;
&lt;a id="user-content-conclusion" class="anchor" href="#conclusion" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;For a complete list of changes, see the &lt;a href="https://jira.spring.io/browse/ANDROID"&gt;Release Notes&lt;/a&gt; in JIRA. The &lt;a href="http://docs.spring.io/spring-android/docs/2.0.0.M2/reference/htmlsingle/"&gt;reference documentation&lt;/a&gt; has also been updated to cover the new features.&lt;/p&gt;

&lt;p&gt;Thanks again to everyone that has contributed to the release! Please try this new milestone and report any problems in &lt;a href="https://jira.spring.io/browse/ANDROID"&gt;JIRA&lt;/a&gt; or on &lt;a href="https://github.com/spring-projects/spring-android/issues"&gt;GitHub&lt;/a&gt;.&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>This Week in Spring - December 2, 2014</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/02/this-week-in-spring-december-2-2014" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Josh Long</name>
    </author>
    <id>tag:spring.io,2014-12-02:1875</id>
    <updated>2014-12-02T23:02:00Z</updated>
    <content type="html">&lt;p&gt;
Welcome to another installment of &lt;em&gt;This Week in Spring&lt;/em&gt;! This week I'm at the  &lt;a href="http://www.therichwebexperience.com/conference/fort_lauderdale/2014/12/home"&gt;Rich Web Experience&lt;/a&gt; in Ft. Lauderdale, FL, joining my pal &lt;a href="http://twitter.com/mstine"&gt;Matt Stine&lt;/a&gt; for a workshop on building microservices with &lt;a href="http://spring.io/projects/spring-boot"&gt;Spring Boot&lt;/a&gt;, &lt;a href="http://spring.io/projects/spring-cloud/"&gt;Spring Cloud&lt;/a&gt; and &lt;a href="http://cloudfoundry.org"&gt;Cloud Foundry&lt;/a&gt;.

 &lt;/p&gt;&lt;p&gt;
  So, without further ado, let's get to it:
&lt;/p&gt;
 

&lt;p&gt;&lt;/p&gt;&lt;ul&gt;
    &lt;li&gt;
      Dr. Dave Syer &lt;a href="https://spring.io/blog/2014/11/25/spring-cloud-1-0-0-m3-available-now"&gt;just announced the M3 release of Spring Cloud&lt;/a&gt;, complete with &lt;em&gt;loads&lt;/em&gt; of cool stuff, including a smarter Ribbon-enabled load-balancing &lt;code&gt;RestTemplate&lt;/code&gt;, a RabbitMQ-based aggregator for Hystrix Metrics based on Turbine 2, Spring Cloud for AWS support, and &lt;em&gt;much&lt;/em&gt; more
    &lt;/li&gt;
    &lt;li&gt;
      Spring ninja Sebastien Deleuze just announced &lt;a href="https://spring.io/blog/2014/12/02/latest-jackson-integration-improvements-in-spring"&gt;some of the amazing new features in Spring's Jackson support&lt;/a&gt;. My favorite? JSON + XML marshalling &lt;em&gt;with&lt;/em&gt; dynamic &lt;em&gt;views&lt;/em&gt;. Views are a  logical subset of attributes from a JSON structure that may be rendered  dynamically.
    &lt;/li&gt;
    &lt;li&gt;
      Check out &lt;a href="https://spring.io/blog/2014/11/26/spring-roo-1-3-1-rc1-available-with-important-bug-fixes"&gt;Spring Roo 1.3.1&lt;/a&gt; and includes bug-fixes for reverse engineering and third party addon installations. Thanks, community and  &lt;a href="http://www.disid.com/"&gt;Disid&lt;/a&gt; in particular for the updates!
    &lt;/li&gt;
    &lt;li&gt;
      &lt;a href="https://spring.io/blog/2014/12/02/spring-tool-suite-and-groovy-grails-tool-suite-3-6-3-released"&gt;Spring and Groovy &amp;amp; Grails Tool Suite lead Martin Lippert  just announced versions 3.6.3&lt;/a&gt;. The new release includes updated Spring Integration visualizations, a installed-by-default Cloud Foundry plugin and more. Check it out!
    &lt;/li&gt;
    &lt;li&gt;
      Want to learn about the Spring Integration Java configuration DSL in terms of a working, line-by-line example? Check out &lt;a href="https://spring.io/blog/2014/11/25/spring-integration-java-dsl-line-by-line-tutorial"&gt;this post by Java configuration DSL lead Artem Bilan&lt;/a&gt;  and if you want to see how it works on JDK 7 or earlier,  &lt;a href="https://spring.io/blog/2014/12/01/spring-integration-java-dsl-pre-java-8-line-by-line-tutorial"&gt;check out this post&lt;/a&gt;.
    &lt;/li&gt;
    &lt;li&gt;
      Spring Data lead Oliver Gierke just announced the &lt;a href="https://spring.io/blog/2014/12/01/first-milestone-of-spring-data-release-train-fowler-available"&gt;first milestone of the next Spring Data release train, Spring Data Fowler&lt;/a&gt;.
    &lt;/li&gt;
    &lt;li&gt;
      The replay from the &lt;a href="https://spring.io/blog/2014/12/02/springone2gx-2014-replay-security-for-microservices-with-spring-and-oauth2"&gt;good Dr. David Syer's SpringOne2GX 2014 talk on security for microservices&lt;/a&gt; is now available online.
    &lt;/li&gt;
    &lt;li&gt;
      Additionally, check out &lt;a href="https://spring.io/blog/2014/12/02/springone2gx-2014-replay-spring-boot-and-netflix-oss"&gt;Dr. Syer and Spencer Gibb's talk introducing Spring Cloud&lt;/a&gt; to the world at SpringOne2GX 2014!
    &lt;/li&gt;
    &lt;li&gt;Check out the SpringOne2GX 2014 replay of Reactor project ninjas Jon Brisbin  and Stephane Maldini's talk: &lt;a href="https://spring.io/blog/2014/12/02/springone2gx-2014-replay-building-reactive-applications-with-reactor-and-the-reactive-streams-standa4d"&gt;Building Reactive applications with Reactor and the Reactive Streams standard&lt;/a&gt;
&lt;/li&gt;
    &lt;li&gt;
      Join Spring Integration project-lead Gary Russell for a not-to-be-missed webinar &lt;a href="https://spring.io/blog/2014/12/02/webinar-introducing-the-java-dsl-for-spring-integration"&gt;on January 27th that introduces the just-released Spring Integration Java configuration DSL&lt;/a&gt;!
    &lt;/li&gt;
    &lt;li&gt;
      You know what they say: go grid or go home! Or something like that? &lt;em&gt;anyway&lt;/em&gt;, definitely check out my pal Luke Shannon's upcoming webinar &lt;a href="https://spring.io/blog/2014/12/02/webinar-building-scalable-data-applications-with-spring-and-gemfire"&gt;on building scalable data applications with Spring Data Gemfire&lt;/a&gt;
    &lt;/li&gt;
    &lt;li&gt;
      Adao Feliz put together a nice &lt;a href="http://blog.adaofeliz.com/2014/11/21/first-look-spring-boot-and-docker/"&gt;post on using Spring Boot and Docker&lt;/a&gt;.
      It's pretty straightforward, so check it out!
    &lt;/li&gt;
    &lt;li&gt; The &lt;em&gt;All and Sundry &lt;/em&gt; blog has a nice post
      &lt;a href="http://www.java-allandsundry.com/2014/11/spring-resttemplate-with-linked-resource.html"&gt;on how to consume linked resources using Spring's &lt;code&gt;RestTemplate&lt;/code&gt;&lt;/a&gt;.
    &lt;/li&gt;
    &lt;li&gt;
      Check out the early bits for the &lt;a href="https://docs.google.com/document/d/1WWoQ_d5nR4-P6VfLbAAbzOZIvRj-Xdff2hsjM_ZWRUQ/mobilebasic?pli=1"&gt;next-gen Cloud Foundry built from the ground up on the Go language and supports Docker as a first-class citizen&lt;/a&gt;. If you know how to use Vagrant, it's dead simple to get a full &lt;em&gt;working&lt;/em&gt; Cloud Foundry cloud running on your laptop if you follow these instructions. Do try it out and let us know!  &lt;/li&gt;
  &lt;/ul&gt;</content>
  </entry>
  <entry>
    <title>Latest Jackson integration improvements in Spring</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/02/latest-jackson-integration-improvements-in-spring" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Sébastien Deleuze</name>
    </author>
    <id>tag:spring.io,2014-11-14:1840</id>
    <updated>2014-12-02T13:30:00Z</updated>
    <content type="html">&lt;p&gt;Spring &lt;a href="https://github.com/FasterXML/jackson"&gt;Jackson&lt;/a&gt; support has been improved lately to be more flexible and powerful. This blog post gives you an update about the most useful Jackson related features available in Spring Framework 4.x and Spring Boot. All the code samples are coming from this &lt;a href="https://github.com/sdeleuze/spring-jackson-demo"&gt;spring-jackson-demo&lt;/a&gt; sample application, feel free to have a look at the code.&lt;/p&gt;

&lt;h2&gt;
&lt;a id="user-content-json-views" class="anchor" href="#json-views" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;JSON Views&lt;/h2&gt;

&lt;p&gt;It can sometimes be useful to filter contextually objects serialized to the HTTP response body. In order to provide such capabilities, Spring MVC now has builtin support for &lt;a href="http://wiki.fasterxml.com/JacksonJsonViews"&gt;Jacksons Serialization Views&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The following example illustrates how to use &lt;code&gt;@JsonView&lt;/code&gt; to filter fields depending on the context of serialization - e.g. getting a "summary" view when dealing with collections, and getting a full representation when dealing with a single resource:&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;View&lt;/span&gt; {
    &lt;span class="pl-s"&gt;interface&lt;/span&gt; &lt;span class="pl-en"&gt;Summary&lt;/span&gt; {}
}

&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;User&lt;/span&gt; {

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;Long&lt;/span&gt; id;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; firstname;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; lastname;

    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; email;
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; address;
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; postalCode;
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; city;
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; country;
}

&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;Message&lt;/span&gt; {

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;Long&lt;/span&gt; id;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;LocalDate&lt;/span&gt; created;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; title;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;User&lt;/span&gt; author;

    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-st"&gt;List&amp;lt;&lt;span class="pl-stj"&gt;User&lt;/span&gt;&amp;gt;&lt;/span&gt; recipients;

    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; body;
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Thanks to Spring MVC &lt;code&gt;@JsonView&lt;/code&gt; support, it is possible to choose, on a per handler method basis, which field should be serialized:&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;RestController&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;MessageController&lt;/span&gt; {

    &lt;span class="pl-st"&gt;@Autowired&lt;/span&gt;
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;MessageService&lt;/span&gt; messageService;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-st"&gt;@RequestMapping&lt;/span&gt;(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;/&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-st"&gt;List&amp;lt;&lt;span class="pl-stj"&gt;Message&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;getAllMessages&lt;/span&gt;() {
        &lt;span class="pl-k"&gt;return&lt;/span&gt; messageService&lt;span class="pl-k"&gt;.&lt;/span&gt;getAll();
    }

    &lt;span class="pl-st"&gt;@RequestMapping&lt;/span&gt;(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;/{id}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Message&lt;/span&gt; &lt;span class="pl-en"&gt;getMessage&lt;/span&gt;(&lt;span class="pl-st"&gt;@PathVariable&lt;/span&gt; &lt;span class="pl-stj"&gt;Long&lt;/span&gt; &lt;span class="pl-v"&gt;id&lt;/span&gt;) {
        &lt;span class="pl-k"&gt;return&lt;/span&gt; messageService&lt;span class="pl-k"&gt;.&lt;/span&gt;get(id);
    }
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In this example, if all messages are retrieved, only the most important fields are serialized thanks to the &lt;code&gt;getAllMessages()&lt;/code&gt; method annotated with &lt;code&gt;@JsonView(View.Summary.class)&lt;/code&gt;:&lt;/p&gt;

&lt;div class="highlight highlight-javascript"&gt;&lt;pre&gt;[ {
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;created&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2014-11-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;title&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Info&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;author&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; {
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;firstname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Brian&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;lastname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Clozel&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
  }
}, {
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;2&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;created&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2014-11-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;title&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Warning&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;author&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; {
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;2&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;firstname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Stéphane&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;lastname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Nicoll&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
  }
}, {
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;3&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;created&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2014-11-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;title&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Alert&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;author&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; {
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;3&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;firstname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Rossen&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;lastname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Stoyanchev&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
  }
} ]&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In Spring MVC default configuration, &lt;code&gt;MapperFeature.DEFAULT_VIEW_INCLUSION&lt;/code&gt; is set to &lt;code&gt;false&lt;/code&gt;. That means that when enabling a JSON View, non annotated fields or properties like &lt;code&gt;body&lt;/code&gt; or &lt;code&gt;recipients&lt;/code&gt; are not serialized.&lt;/p&gt;

&lt;p&gt;When a specific &lt;code&gt;Message&lt;/code&gt; is retrieved using the &lt;code&gt;getMessage()&lt;/code&gt; handler method (no JSON View specified), all fields are serialized as expected:&lt;/p&gt;

&lt;div class="highlight highlight-javascript"&gt;&lt;pre&gt;{
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;created&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2014-11-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;title&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Info&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;body&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;This is an information message&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;author&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; {
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;firstname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Brian&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;lastname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Clozel&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;email&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bclozel@pivotal.io&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;address&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;1 Jaures street&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;postalCode&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;69003&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;city&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Lyon&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;country&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;France&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
  },
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;recipients&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; [ {
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;2&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;firstname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Stéphane&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;lastname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Nicoll&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;email&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;snicoll@pivotal.io&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;address&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;42 Obama street&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;postalCode&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;1000&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;city&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Brussel&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;country&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Belgium&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
  }, {
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;3&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;firstname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Rossen&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;lastname&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Stoyanchev&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;email&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;rstoyanchev@pivotal.io&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;address&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;3 Warren street&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;postalCode&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;10011&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;city&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;New York&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;country&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;USA&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
  } ]
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Only &lt;strong&gt;one&lt;/strong&gt; class or interface can be specified with the &lt;code&gt;@JsonView&lt;/code&gt; annotation, but you can use inheritance to represent JSON View hierarchies (if a field is part of a JSON View, it will be also part of parent view). For example, this handler method will serialize fields annotated with &lt;code&gt;@JsonView(View.Summary.class)&lt;/code&gt; &lt;strong&gt;and&lt;/strong&gt; &lt;code&gt;@JsonView(View.SummaryWithRecipients.class)&lt;/code&gt;:&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;View&lt;/span&gt; {
    &lt;span class="pl-s"&gt;interface&lt;/span&gt; &lt;span class="pl-en"&gt;Summary&lt;/span&gt; {}
    &lt;span class="pl-s"&gt;interface&lt;/span&gt; &lt;span class="pl-en"&gt;SummaryWithRecipients&lt;/span&gt; &lt;span class="pl-s"&gt;extends&lt;/span&gt; &lt;span class="pl-e"&gt;Summary&lt;/span&gt; {}
}

&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;Message&lt;/span&gt; {

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;Long&lt;/span&gt; id;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;LocalDate&lt;/span&gt; created;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; title;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;Summary&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;User&lt;/span&gt; author;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;SummaryWithRecipients&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-st"&gt;List&amp;lt;&lt;span class="pl-stj"&gt;User&lt;/span&gt;&amp;gt;&lt;/span&gt; recipients;

    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;String&lt;/span&gt; body;
}

@&lt;span class="pl-stj"&gt;RestController&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;MessageController&lt;/span&gt; {

    &lt;span class="pl-st"&gt;@Autowired&lt;/span&gt;
    &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;MessageService&lt;/span&gt; messageService;

    &lt;span class="pl-st"&gt;@JsonView&lt;/span&gt;(&lt;span class="pl-stj"&gt;View&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-stj"&gt;SummaryWithRecipients&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)
    &lt;span class="pl-st"&gt;@RequestMapping&lt;/span&gt;(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;/with-recipients&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-st"&gt;List&amp;lt;&lt;span class="pl-stj"&gt;Message&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;getAllMessagesWithRecipients&lt;/span&gt;() {
        &lt;span class="pl-k"&gt;return&lt;/span&gt; messageService&lt;span class="pl-k"&gt;.&lt;/span&gt;getAll();
    }
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;JSON Views could also be specified when using &lt;code&gt;RestTemplate&lt;/code&gt; HTTP client or &lt;code&gt;MappingJackson2JsonView&lt;/code&gt; by wrapping the value to serialize in a &lt;code&gt;MappingJacksonValue&lt;/code&gt; as shown in this &lt;a href="https://github.com/spring-projects/spring-framework/blob/master/spring-web/src/test/java/org/springframework/web/client/RestTemplateIntegrationTests.java#L224"&gt;code sample&lt;/a&gt;.&lt;/p&gt;

&lt;h2&gt;
&lt;a id="user-content-jsonp" class="anchor" href="#jsonp" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;JSONP&lt;/h2&gt;

&lt;p&gt;As described in the &lt;a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-jsonp"&gt;reference documentation&lt;/a&gt;, you can enable &lt;a href="http://en.wikipedia.org/wiki/JSONP"&gt;JSONP&lt;/a&gt; for &lt;code&gt;@ResponseBody&lt;/code&gt; and &lt;code&gt;ResponseEntity&lt;/code&gt; methods by declaring an &lt;code&gt;@ControllerAdvice&lt;/code&gt; bean that extends &lt;code&gt;AbstractJsonpResponseBodyAdvice&lt;/code&gt; as shown below:&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;ControllerAdvice&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;JsonpAdvice&lt;/span&gt; &lt;span class="pl-s"&gt;extends&lt;/span&gt; &lt;span class="pl-e"&gt;AbstractJsonpResponseBodyAdvice&lt;/span&gt; {

    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-en"&gt;JsonpAdvice&lt;/span&gt;() {
        &lt;span class="pl-v"&gt;super&lt;/span&gt;(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;callback&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;);
    }
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;With such &lt;code&gt;@ControllerAdvice&lt;/code&gt; bean registered, it will be possible to request the JSON webservice from another domain using a &lt;code&gt;&amp;lt;script /&amp;gt;&lt;/code&gt; tag:&lt;/p&gt;

&lt;div class="highlight highlight-html"&gt;&lt;pre&gt;&lt;span class="pl-s2"&gt;&amp;lt;&lt;span class="pl-ent"&gt;script&lt;/span&gt; &lt;span class="pl-e"&gt;type&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;application/javascript&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="pl-s2"&gt;            &lt;span class="pl-e"&gt;src&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;http://mydomain.com/1.json?jsonp=parseResponse&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class="pl-s2"&gt;&amp;lt;/&lt;span class="pl-ent"&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In this example, the received payload would be:&lt;/p&gt;

&lt;div class="highlight highlight-javascript"&gt;&lt;pre&gt;parseResponse({
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;id&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;,
  &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;created&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2014-11-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
  ...
});&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;JSONP is also supported and automatically enabled when using &lt;code&gt;MappingJackson2JsonView&lt;/code&gt; with a request that has a query parameter named jsonp or callback. The JSONP query parameter name(s) could be customized through the &lt;code&gt;jsonpParameterNames&lt;/code&gt; property.&lt;/p&gt;

&lt;h2&gt;
&lt;a id="user-content-xml-support" class="anchor" href="#xml-support" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;XML support&lt;/h2&gt;

&lt;p&gt;Since 2.0 release, Jackson provides first class support for some other data formats than JSON. Spring Framework and Spring Boot provide builtin support for Jackson based XML serialization/deserialization.&lt;/p&gt;

&lt;p&gt;As soon as you include the &lt;a href="https://github.com/FasterXML/jackson-dataformat-xml"&gt;&lt;code&gt;jackson-dataformat-xml&lt;/code&gt;&lt;/a&gt; dependency to your project, it is automatically used instead of JAXB2.&lt;/p&gt;

&lt;p&gt;Using Jackson XML extension has several advantages over JAXB2:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Both Jackson and JAXB annotations are recognized&lt;/li&gt;
&lt;li&gt;JSON View are supported, allowing you to build easily REST Webservices with the same filtered output for both XML and JSON data formats&lt;/li&gt;
&lt;li&gt;No need to annotate your class with &lt;code&gt;@XmlRootElement&lt;/code&gt;, each class serializable in JSON will serializable in XML&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You usually also want to make sure that the XML library in use is Woodstox since:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;It is faster than Stax implementation provided with the JDK&lt;/li&gt;
&lt;li&gt;It avoids some known issues like adding unnecessary namespace prefixes&lt;/li&gt;
&lt;li&gt;Some features like pretty print don't work without it&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In order to use it, simply add the latest &lt;a href="http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.codehaus.woodstox%22%20AND%20a%3A%22woodstox-core-asl%22"&gt;&lt;code&gt;woodstox-core-asl&lt;/code&gt;&lt;/a&gt; dependency available to your project.&lt;/p&gt;

&lt;h2&gt;
&lt;a id="user-content-customizing-the-jackson-objectmapper" class="anchor" href="#customizing-the-jackson-objectmapper" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;Customizing the Jackson ObjectMapper&lt;/h2&gt;

&lt;p&gt;Prior to Spring Framework 4.1.1, Jackson &lt;code&gt;HttpMessageConverter&lt;/code&gt;s were using &lt;code&gt;ObjectMapper&lt;/code&gt; default configuration. In order to provide a better and easily customizable default configuration, a new &lt;a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html"&gt;&lt;code&gt;Jackson2ObjectMapperBuilder&lt;/code&gt;&lt;/a&gt; has been introduced. It is the JavaConfig equivalent of the well known &lt;a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html"&gt;&lt;code&gt;Jackson2ObjectMapperFactoryBean&lt;/code&gt;&lt;/a&gt; used in XML configuration.&lt;/p&gt;

&lt;p&gt;&lt;a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html"&gt;&lt;code&gt;Jackson2ObjectMapperBuilder&lt;/code&gt;&lt;/a&gt; provides a nice API to customize various Jackson settings while  retaining Spring Framework provided default ones. It also allows to create &lt;code&gt;ObjectMapper&lt;/code&gt; and &lt;code&gt;XmlMapper&lt;/code&gt; instances based on the same configuration.&lt;/p&gt;

&lt;p&gt;Both &lt;code&gt;Jackson2ObjectMapperBuilder&lt;/code&gt; and &lt;code&gt;Jackson2ObjectMapperFactoryBean&lt;/code&gt; define a better Jackson default configuration. For example, the &lt;a href="http://fasterxml.github.io/jackson-databind/javadoc/2.0.0/com/fasterxml/jackson/databind/DeserializationFeature.html#FAIL_ON_UNKNOWN_PROPERTIES"&gt;&lt;code&gt;DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES&lt;/code&gt;&lt;/a&gt; property set to false, in order to allow deserialization of JSON objects with unmapped properties.&lt;/p&gt;

&lt;p&gt;Jackson support for Java 8 Date &amp;amp; Time API data types is automatically registered when Java 8 is used and &lt;a href="https://github.com/FasterXML/jackson-datatype-jsr310"&gt;&lt;code&gt;jackson-datatype-jsr310&lt;/code&gt;&lt;/a&gt; is on the classpath. Joda-Time support is registered as well when &lt;a href="https://github.com/FasterXML/jackson-datatype-joda"&gt;&lt;code&gt;jackson-datatype-joda&lt;/code&gt;&lt;/a&gt; is part of your project dependencies.&lt;/p&gt;

&lt;p&gt;These classes also allow you to register easily Jackson &lt;a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html#mixIn-java.lang.Class-java.lang.Class-"&gt;mixins&lt;/a&gt;, &lt;a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html#modules-java.util.List-"&gt;modules&lt;/a&gt;, &lt;a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html#serializers-com.fasterxml.jackson.databind.JsonSerializer...-"&gt;serializers&lt;/a&gt; or even property naming strategy like &lt;code&gt;PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES&lt;/code&gt; if you want to have your &lt;code&gt;userName&lt;/code&gt; java property translated to &lt;code&gt;user_name&lt;/code&gt; in JSON.&lt;/p&gt;

&lt;h3&gt;
&lt;a id="user-content-with-spring-boot" class="anchor" href="#with-spring-boot" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;With Spring Boot&lt;/h3&gt;

&lt;p&gt;As described in the Spring Boot reference documentation, there are various ways to &lt;a href="http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-customize-the-jackson-objectmapper"&gt;customize the Jackson &lt;code&gt;ObjectMapper&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You can for example enable/disable Jackson features easily by adding properties like &lt;code&gt;spring.jackson.serialization.indent_output=true&lt;/code&gt; to &lt;a href="http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-external-config-application-property-files"&gt;&lt;code&gt;application.properties&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As an alternative, in the upcoming 1.2 release Spring Boot also allows to customize the Jackson configuration (JSON and XML) used by Spring MVC &lt;code&gt;HttpMessageConverter&lt;/code&gt;s by declaring a &lt;code&gt;Jackson2ObjectMapperBuilder&lt;/code&gt; &lt;code&gt;@Bean&lt;/code&gt;:&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Bean&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Jackson2ObjectMapperBuilder&lt;/span&gt; jacksonBuilder() {
    &lt;span class="pl-stj"&gt;Jackson2ObjectMapperBuilder&lt;/span&gt; builder &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Jackson2ObjectMapperBuilder&lt;/span&gt;();
    builder&lt;span class="pl-k"&gt;.&lt;/span&gt;indentOutput(&lt;span class="pl-c1"&gt;true&lt;/span&gt;)&lt;span class="pl-k"&gt;.&lt;/span&gt;dateFormat(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;SimpleDateFormat&lt;/span&gt;(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;yyyy-MM-dd&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;));
    &lt;span class="pl-k"&gt;return&lt;/span&gt; builder;
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This is useful if you want to use advanced Jackson configuration not exposed through regular configuration keys.&lt;/p&gt;

&lt;h3&gt;
&lt;a id="user-content-without-spring-boot" class="anchor" href="#without-spring-boot" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;Without Spring Boot&lt;/h3&gt;

&lt;p&gt;In a plain Spring Framework application, you can also use &lt;code&gt;Jackson2ObjectMapperBuilder&lt;/code&gt; to customize the XML and JSON &lt;code&gt;HttpMessageConverter&lt;/code&gt;s as shown bellow:&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Configuration&lt;/span&gt;
@&lt;span class="pl-stj"&gt;EnableWebMvc&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;WebConfiguration&lt;/span&gt; &lt;span class="pl-s"&gt;extends&lt;/span&gt; &lt;span class="pl-e"&gt;WebMvcConfigurerAdapter&lt;/span&gt; {

    &lt;span class="pl-st"&gt;@Override&lt;/span&gt;
    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-st"&gt;void&lt;/span&gt; &lt;span class="pl-en"&gt;configureMessageConverters&lt;/span&gt;(&lt;span class="pl-st"&gt;List&amp;lt;&lt;span class="pl-st"&gt;HttpMessageConverter&amp;lt;?&amp;gt;&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-v"&gt;converters&lt;/span&gt;) {
        &lt;span class="pl-stj"&gt;Jackson2ObjectMapperBuilder&lt;/span&gt; builder &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Jackson2ObjectMapperBuilder&lt;/span&gt;();
        builder&lt;span class="pl-k"&gt;.&lt;/span&gt;indentOutput(&lt;span class="pl-c1"&gt;true&lt;/span&gt;)&lt;span class="pl-k"&gt;.&lt;/span&gt;dateFormat(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;SimpleDateFormat&lt;/span&gt;(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;yyyy-MM-dd&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;));
        converters&lt;span class="pl-k"&gt;.&lt;/span&gt;add(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;MappingJackson2HttpMessageConverter&lt;/span&gt;(builder&lt;span class="pl-k"&gt;.&lt;/span&gt;build()));
        converters&lt;span class="pl-k"&gt;.&lt;/span&gt;add(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;MappingJackson2XmlHttpMessageConverter&lt;/span&gt;(builder&lt;span class="pl-k"&gt;.&lt;/span&gt;createXmlMapper(&lt;span class="pl-c1"&gt;true&lt;/span&gt;)&lt;span class="pl-k"&gt;.&lt;/span&gt;build()));
    }
}&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;
&lt;a id="user-content-more-to-come" class="anchor" href="#more-to-come" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;More to come&lt;/h2&gt;

&lt;p&gt;With the upcoming Spring Framework 4.1.3 release, thanks to the addition of a Spring context aware &lt;a href="http://wiki.fasterxml.com/HandlerInstantiator"&gt;&lt;code&gt;HandlerInstantiator&lt;/code&gt;&lt;/a&gt; (see &lt;a href="https://jira.spring.io/browse/SPR-10768"&gt;SPR-10768&lt;/a&gt; for more details), you will be able to autowire Jackson handlers (serializers, deserializers, type and type id resolvers).&lt;/p&gt;

&lt;p&gt;This will allow you to build, for example, a custom deserializer that will replace a field containing only a reference in the JSON payload by the full &lt;code&gt;Entity&lt;/code&gt; retrieved from the database.&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>Spring Tool Suite and Groovy/Grails Tool Suite 3.6.3 released</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/02/spring-tool-suite-and-groovy-grails-tool-suite-3-6-3-released" />
    <category term="releases" label="Releases" />
    <author>
      <name>Martin Lippert</name>
    </author>
    <id>tag:spring.io,2014-12-02:1867</id>
    <updated>2014-12-02T11:50:07Z</updated>
    <content type="html">&lt;p&gt;Dear Spring Community,&lt;/p&gt;

&lt;p&gt;I am happy to announce the new release of our Eclipse-based tooling today:
The Spring Tool Suite (STS) 3.6.3 and the Groovy/Grails Tool Suite (GGTS) 3.6.3.&lt;/p&gt;

&lt;p&gt;Highlights from this release include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Pivotal tc Server updated to 3.0.2 (incl. Spring Insight on Java8)&lt;/li&gt;
&lt;li&gt;Cloud Foundry for Eclipse now pre-installed&lt;/li&gt;
&lt;li&gt;Many new Spring Integration extensions supported in the graphical Spring Integration editor&lt;/li&gt;
&lt;li&gt;Gradle tooling has better handling for auto mapping of jar dependencies to project dependencies&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;To download the distributions, please go visit:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Spring Tool Suite: &lt;a href="https://spring.io/tools/sts/all"&gt;https://spring.io/tools/sts/all&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Groovy/Grails Tool Suite: &lt;a href="https://spring.io/tools/ggts/all"&gt;https://spring.io/tools/ggts/all&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Detailed new and noteworthy notes can be found here: &lt;a href="http://docs.spring.io/sts/nan/v363/NewAndNoteworthy.html"&gt;STS/GGTS 3.6.3 New &amp;amp; Noteworthy&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;STS/GGTS 3.6.4 is scheduled to ship in March 2015, shortly after the Eclipse Luna SR2 release.&lt;/p&gt;

&lt;p&gt;Enjoy!&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>SpringOne2GX 2014 Replay: Security for Microservices with Spring and OAuth2</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/02/springone2gx-2014-replay-security-for-microservices-with-spring-and-oauth2" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-02:1872</id>
    <updated>2014-12-02T10:50:00Z</updated>
    <content type="html">&lt;p&gt; Security for Microservices with Spring and OAuth2 &lt;/p&gt;

&lt;p&gt;Recorded at SpringOne2GX 2014. &lt;/p&gt;

&lt;p&gt;Speaker: Dr. David Syer &lt;/p&gt;

&lt;p&gt;Slides: &lt;a href="http://www.slideshare.net/SpringCentral/syer-microservicesecurity"&gt;http://www.slideshare.net/SpringCentral/syer-microservicesecurity&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;OAuth2 is a lightweight security protocol that is well-suited for use with HTTP, the protocol at the heart of many modern architectures. Spring Security OAuth2 has a load of new features, not the least of which being the `@Configuration` support in version 2.0. Combine these with Spring Boot and you have a platform which can get you a secure HTTP service application in about 20 lines of code. This presentation shows how the combination of rapid development and production-ready features in the modern Spring stack are a perfect mixture for developing secure components in a system composed of microservices. We explore the new features in Spring OAuth2, guide you through the choice of which to use and when, and show how easy they are to enable quickly.  This is the 90 minute version of the same talk that was on the Spring webinar program recently.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;&lt;iframe width="560" height="315" src="//www.youtube.com/embed/MLfL1NpwUC4" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;</content>
  </entry>
  <entry>
    <title>SpringOne2GX 2014 Replay: Spring Boot and Netflix OSS</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/02/springone2gx-2014-replay-spring-boot-and-netflix-oss" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-02:1871</id>
    <updated>2014-12-02T10:31:00Z</updated>
    <content type="html">&lt;p&gt;Recorded at SpringOne2GX 2014. &lt;/p&gt;

&lt;p&gt;Speaker: Spencer Gibb, Dr. David Syer &lt;/p&gt;

&lt;p&gt; Slides: &lt;a href="http://www.slideshare.net/SpringCentral/syer-gibbcloud"&gt;http://www.slideshare.net/SpringCentral/syer-gibbcloud&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;Learn basic concepts about Spring Boot and Netflix OSS software and how to integrate Netflix OSS technologies into Spring Boot including: distributed configuration using Spring and Archaius Eureka (service registration and discovery) Feign (easy rest clients) Ribbon (client side load balancing) Hystrix (circuit breaker/fault tolerance library) RxJava (Reactive Programming library) Zuul (routing) Turbine and Hystrix Dashboard (service health dashboard)&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;&lt;iframe width="560" height="315" src="//www.youtube.com/embed/X5DRXCKJH_M" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;</content>
  </entry>
  <entry>
    <title>SpringOne2GX 2014 Replay:  Building Reactive applications with Reactor and the Reactive Streams standa4d</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/02/springone2gx-2014-replay-building-reactive-applications-with-reactor-and-the-reactive-streams-standa4d" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-02:1870</id>
    <updated>2014-12-02T10:21:00Z</updated>
    <content type="html">&lt;p&gt;Recorded at SpringOne2GX 2014. &lt;/p&gt;

&lt;p&gt;Speakers: Jon Brisbin, Stephane Maldini &lt;/p&gt;

&lt;p&gt;Slides:&lt;a href="http://www.slideshare.net/SpringCentral/spring-one2gx-2014reactivestreams-41130280"&gt;http://www.slideshare.net/SpringCentral/spring-one2gx-2014reactivestreams-41130280&lt;/a&gt; &lt;/p&gt;

&lt;p&gt; This session will introduce attendees to the Reactive Streams project, a new initiative between reactive software's heavy-hitters like Pivotal, Typesafe, Netflix, Twitter, and others. Since Pivotal's own Reactor framework implements this informal standard, we'll demonstrate how to build applications that can connect to other Reactive Streams implementations in a completely non-blocking way.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;&lt;iframe width="560" height="315" src="//www.youtube.com/embed/AvwZEWu5PPc" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;</content>
  </entry>
  <entry>
    <title>Webinar: Introducing the Java DSL for Spring Integration</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/02/webinar-introducing-the-java-dsl-for-spring-integration" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-02:1869</id>
    <updated>2014-12-02T10:02:00Z</updated>
    <content type="html">&lt;p&gt;Speaker: Gary Russell, Pivotal &lt;/p&gt;

&lt;p&gt;The Spring Integration JavaConfig and DSL extension provides a set of convenient Builders and a fluent API to configure Spring Integration message flows from Spring @Configuration classes. The Java DSL for Spring Integration is essentially a facade for Spring Integration. The DSL provides a simple way to embed Spring Integration Message Flows into your application using the fluent Builder pattern together with existing Java and Annotation configurations from Spring Framework and Spring Integration as well. Another useful tool to simplify configuration is Java 8 Lambdas.&lt;/p&gt;

&lt;p&gt;Tuesday, Jan 27th, 2015 3:00PM GMT (London GMT) &lt;a href="http://connect.pivotal.io/OSS_Webinar_7AMIntroducingtheJavaDSLforSpringIntegration_Register.html"&gt;Register&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tuesday, Jan 27th, 2015 10:00AM PST (San Francisco GMT-08:00) &lt;a href="http://connect.pivotal.io/OSS_Webinar_10AMIntroducingtheJavaDSLforSpringIntegration_Register.html"&gt;Register&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt; &lt;/p&gt;</content>
  </entry>
  <entry>
    <title>Webinar: Building Scalable Data Applications with Spring and GemFire</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/02/webinar-building-scalable-data-applications-with-spring-and-gemfire" />
    <category term="news" label="News and Events" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-12-02:1868</id>
    <updated>2014-12-02T09:57:00Z</updated>
    <content type="html">&lt;p&gt;Speaker: Luke Shannon &lt;/p&gt;

&lt;p&gt;GemFire is Pivotal's distributed In Memory Data grid. In this session we will cover simplifying configuring a GemFire grid using Spring Data GemFire, and explore how data is dynamically distributed and made highly available as the grid resources are increased or decreased to meet increased client demand. GemFire access and testing patterns using Spring will be reviewed in detail.  We will walk through creating a domain object and using Spring Data GemFire Repositories to perform CRUD operations on a GemFire grid, creating a Spring MVC/Spring Boot application that uses GemFire as its persistence layer, review how Spring Boot and Spring Data GemFire can be used to help with GemFire test cases and how Spring Data GemFire can make creation and execution of GemFire functions easier. We will also explore how Spring XD can be used to load and monitor data changes in the grid. This will be a hands on, code oriented session. &lt;/p&gt;

&lt;p&gt;Tuesday, Jan 13th, 2015 3:00PM GMT (London GMT) &lt;a href="http://connect.pivotal.io/OSS_Webinar_7AMBuildingScalableDataApplicationswithSpringandGemFire_Register.html"&gt;Register&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tuesday, Jan 13th, 2014 10:00AM PST (San Francisco GMT-08:00) &lt;a href="http://connect.pivotal.io/OSS_Webinar_10AMBuildingScalableDataApplicationswithSpringandGemFire_Register.html"&gt;Register&lt;/a&gt;&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>First Milestone of Spring Data Release Train Fowler Available</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/01/first-milestone-of-spring-data-release-train-fowler-available" />
    <category term="releases" label="Releases" />
    <author>
      <name>Oliver Gierke</name>
    </author>
    <id>tag:spring.io,2014-12-01:1866</id>
    <updated>2014-12-01T14:26:35Z</updated>
    <content type="html">&lt;p&gt;On behalf of the Spring Data team, I am happy to announce the first milestone of the Spring Data Release train &lt;a href="https://github.com/spring-projects/spring-data-commons/wiki/Release-Train-Fowler"&gt;Fowler&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The release ships &lt;a href="https://jira.spring.io/issues/?filter=14842"&gt;170 tickets fixed&lt;/a&gt;, 119 of them unique to the Fowler release train. Find a curated changelog &lt;a href="https://github.com/spring-projects/spring-data-commons/wiki/Release-Train-Fowler"&gt;here&lt;/a&gt;. The highlights of the release include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Upgrades to Spring 4.0.8 and Querydsl 3.6.0.&lt;/li&gt;
&lt;li&gt;Performance improvements in converter subsystem by using byte-code generation.&lt;/li&gt;
&lt;li&gt;Out-of-the-box support for JSR-310 date/time types (MongoDB).&lt;/li&gt;
&lt;li&gt;Various (performance) improvements in the usage of SpEL (JPA).&lt;/li&gt;
&lt;li&gt;Support for &lt;code&gt;$bit&lt;/code&gt;, &lt;code&gt;$mul&lt;/code&gt; and &lt;code&gt;$position&lt;/code&gt; operators (MongoDB).&lt;/li&gt;
&lt;li&gt;Improved proxy-id detection for JPA and REST.&lt;/li&gt;
&lt;li&gt;Introdcution of &lt;code&gt;QueryDslPredicateExceutor.findAll(OrderSpecifier&amp;lt;?&amp;gt;... orders)&lt;/code&gt; (Querydsl).&lt;/li&gt;
&lt;li&gt;CDI repository extension for Cassandra module.&lt;/li&gt;
&lt;li&gt;Upgrade to Gemfire 8 (Gemfire).&lt;/li&gt;
&lt;li&gt;Version property based ETag generation (REST).&lt;/li&gt;
&lt;li&gt;Upgrades to Solr 4.10.1, Elasticsearch 1.2, Neo4J 2.1.5, compatibility with upcoming MongoDB server and driver.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Here are the participating modules:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Spring Data Commons 1.10 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-commons/1.10.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/commons/docs/1.10.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/commons/docs/1.10.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/commons/docs/1.10.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data JPA 1.8 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-jpa/1.8.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/jpa/docs/1.8.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/jpa/docs/1.8.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/jpa/docs/1.8.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data MongoDB 1.7 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-mongodb/1.7.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/mongodb/docs/1.7.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/mongodb/docs/1.7.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/mongodb/docs/1.7.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data Neo4j 3.3 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-neo4j/3.3.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/neo4j/docs/3.3.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/neo4j/docs/3.3.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/neo4j/docs/3.3.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data Solr 1.4 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-solr/1.4.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/solr/docs/1.4.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/solr/docs/1.4.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/solr/docs/1.4.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data Couchbase 1.3 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-couchbase/1.3.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/couchbase/docs/1.3.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/couchbase/docs/1.3.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/couchbase/docs/1.3.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data Cassandra 1.2 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-cassandra/1.2.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/cassandra/docs/1.2.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/cassandra/docs/1.2.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/cassandra/docs/1.2.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data Elasticsearch 1.2 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-elasticsearch/1.2.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/elasticsearch/docs/1.2.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/elasticsearch/docs/1.2.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/elasticsearch/docs/1.2.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data Gemfire 1.6 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-gemfire/1.6.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/gemfire/docs/1.6.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/gemfire/docs/1.6.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/gemfire/docs/1.6.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data Redis 1.5 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-redis/1.5.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/redis/docs/1.5.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/redis/docs/1.5.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/redis/docs/1.5.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;Spring Data REST 2.3 M1 - &lt;a href="http://repo.spring.io/libs-milestone/org/springframework/data/spring-data-rest-webmvc/2.3.0.M1"&gt;Artifacts&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/rest/docs/2.3.0.M1/api"&gt;JavaDocs&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/rest/docs/2.3.0.M1/reference/html"&gt;Documentation&lt;/a&gt; - &lt;a href="http://docs.spring.io/spring-data/rest/docs/2.3.0.M1/changelog.txt"&gt;Changelog&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Be sure to check out the already &lt;a href="https://github.com/spring-projects/spring-data-examples"&gt;updated examples&lt;/a&gt;. Get in touch via &lt;a href="https://twitter.com/SpringData"&gt;Twitter&lt;/a&gt;, &lt;a href="http://stackoverflow.com/questions/tagged/spring-data"&gt;StackOverflow&lt;/a&gt; or &lt;a href="http://jira.spring.io"&gt;JIRA&lt;/a&gt;. We're looking forward to your feedback!&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>Spring Integration Java DSL (pre Java 8): Line by line tutorial</title>
    <link rel="alternate" href="https://spring.io/blog/2014/12/01/spring-integration-java-dsl-pre-java-8-line-by-line-tutorial" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Artem Bilan</name>
    </author>
    <id>tag:spring.io,2014-11-28:1865</id>
    <updated>2014-12-01T08:20:47Z</updated>
    <content type="html">&lt;p&gt;Dear Spring Community!&lt;/p&gt;

&lt;p&gt;Recently we published the
&lt;a href="https://spring.io/blog/2014/11/25/spring-integration-java-dsl-line-by-line-tutorial"&gt;Spring Integration Java DSL: Line by line tutorial&lt;/a&gt;,
 which uses Java 8 Lambdas extensively. We received some feedback that this is good introduction
 to the DSL, but a similar tutorial is needed for those users, who can't move to the Java 8 or aren't yet familiar
 with &lt;code&gt;Lambdas&lt;/code&gt;, but wish to take advantage&lt;/p&gt;

&lt;p&gt;So, to help those Spring Integration users who want to moved from XML configuration to Java &amp;amp; Annotation
configuration, we provide this &lt;code&gt;line-by-line tutorial&lt;/code&gt; to demonstrate that, even without &lt;code&gt;Lambdas&lt;/code&gt;, we gain
a lot from Spring Integration Java DSL usage. Although, most will agree that the lambda syntax provides for a
more succinct definition.&lt;/p&gt;

&lt;p&gt;We analyse here the same &lt;a href="https://github.com/spring-projects/spring-integration-samples/tree/master/dsl/cafe-dsl"&gt;Cafe Demo&lt;/a&gt; sample,
 but using the pre Java 8 variant for configuration. Many options are the same, so we just copy/paste their description here to
 achieve a complete picture. Since this Spring Integration Java DSL configuration is quite different to the
 Java 8 lambda style, it will be useful for all users to get a knowlage how we can achieve the same result with a rich variety
 of options provided by the Spring Integration Java DSL.&lt;/p&gt;

&lt;p&gt;The source code for our application is placed in a single class, which is a &lt;code&gt;Boot&lt;/code&gt; application;
significant lines are annotated with a number corresponding to the comments, which follow:&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;SpringBootApplication&lt;/span&gt;                                                   &lt;span class="pl-c"&gt;// 1&lt;/span&gt;
@&lt;span class="pl-stj"&gt;IntegrationComponentScan&lt;/span&gt;                                                &lt;span class="pl-c"&gt;// 2&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;Application&lt;/span&gt; {

  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;static&lt;/span&gt; &lt;span class="pl-st"&gt;void&lt;/span&gt; &lt;span class="pl-en"&gt;main&lt;/span&gt;(&lt;span class="pl-st"&gt;String&lt;/span&gt;[] &lt;span class="pl-v"&gt;args&lt;/span&gt;) &lt;span class="pl-s"&gt;throws&lt;/span&gt; &lt;span class="pl-stj"&gt;Exception&lt;/span&gt; {
    &lt;span class="pl-stj"&gt;ConfigurableApplicationContext&lt;/span&gt; ctx &lt;span class="pl-k"&gt;=&lt;/span&gt;
            &lt;span class="pl-stj"&gt;SpringApplication&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;run(&lt;span class="pl-stj"&gt;Application&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class, args);              &lt;span class="pl-c"&gt;// 3&lt;/span&gt;

    &lt;span class="pl-stj"&gt;Cafe&lt;/span&gt; cafe &lt;span class="pl-k"&gt;=&lt;/span&gt; ctx&lt;span class="pl-k"&gt;.&lt;/span&gt;getBean(&lt;span class="pl-stj"&gt;Cafe&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class);                                 &lt;span class="pl-c"&gt;// 4&lt;/span&gt;
    &lt;span class="pl-k"&gt;for&lt;/span&gt; (&lt;span class="pl-st"&gt;int&lt;/span&gt; i &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;; i &lt;span class="pl-k"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;100&lt;/span&gt;; i&lt;span class="pl-k"&gt;++&lt;/span&gt;) {                                     &lt;span class="pl-c"&gt;// 5&lt;/span&gt;
      &lt;span class="pl-stj"&gt;Order&lt;/span&gt; order &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Order&lt;/span&gt;(i);
      order&lt;span class="pl-k"&gt;.&lt;/span&gt;addItem(&lt;span class="pl-stj"&gt;DrinkType&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;LATTE&lt;/span&gt;, &lt;span class="pl-c1"&gt;2&lt;/span&gt;, &lt;span class="pl-c1"&gt;false&lt;/span&gt;);
      order&lt;span class="pl-k"&gt;.&lt;/span&gt;addItem(&lt;span class="pl-stj"&gt;DrinkType&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;MOCHA&lt;/span&gt;, &lt;span class="pl-c1"&gt;3&lt;/span&gt;, &lt;span class="pl-c1"&gt;true&lt;/span&gt;);
      cafe&lt;span class="pl-k"&gt;.&lt;/span&gt;placeOrder(order);
    }

    &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Hit 'Enter' to terminate&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;);                      &lt;span class="pl-c"&gt;// 6&lt;/span&gt;
    &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;in&lt;span class="pl-k"&gt;.&lt;/span&gt;read();
    ctx&lt;span class="pl-k"&gt;.&lt;/span&gt;close();
  }

  &lt;span class="pl-st"&gt;@MessagingGateway&lt;/span&gt;                                                      &lt;span class="pl-c"&gt;// 7&lt;/span&gt;
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;interface&lt;/span&gt; &lt;span class="pl-en"&gt;Cafe&lt;/span&gt; {

    &lt;span class="pl-st"&gt;@Gateway&lt;/span&gt;(&lt;span class="pl-c1"&gt;requestChannel&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;orders.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)                            &lt;span class="pl-c"&gt;// 8&lt;/span&gt;
    &lt;span class="pl-st"&gt;void&lt;/span&gt; &lt;span class="pl-en"&gt;placeOrder&lt;/span&gt;(&lt;span class="pl-stj"&gt;Order&lt;/span&gt; &lt;span class="pl-v"&gt;order&lt;/span&gt;);                                        &lt;span class="pl-c"&gt;// 9&lt;/span&gt;

  }

  &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-s"&gt;final&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt; hotDrinkCounter &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt;();

  &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-s"&gt;final&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt; coldDrinkCounter &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt;();    &lt;span class="pl-c"&gt;// 10&lt;/span&gt;

  &lt;span class="pl-st"&gt;@Autowired&lt;/span&gt;
  &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;CafeAggregator&lt;/span&gt; cafeAggregator;                                 &lt;span class="pl-c"&gt;// 11&lt;/span&gt;

  &lt;span class="pl-st"&gt;@Bean&lt;/span&gt;(&lt;span class="pl-c1"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-stj"&gt;PollerMetadata&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;DEFAULT_POLLER&lt;/span&gt;)
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;PollerMetadata&lt;/span&gt; &lt;span class="pl-en"&gt;poller&lt;/span&gt;() {                                       &lt;span class="pl-c"&gt;// 12&lt;/span&gt;
    &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;Pollers&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;fixedDelay(&lt;span class="pl-c1"&gt;1000&lt;/span&gt;)&lt;span class="pl-k"&gt;.&lt;/span&gt;get();
  }

  &lt;span class="pl-st"&gt;@Bean&lt;/span&gt;
  &lt;span class="pl-st"&gt;@SuppressWarnings&lt;/span&gt;(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;unchecked&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; &lt;span class="pl-en"&gt;orders&lt;/span&gt;() {                                      &lt;span class="pl-c"&gt;// 13&lt;/span&gt;
    &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlows&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;from(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;orders.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)                         &lt;span class="pl-c"&gt;// 14&lt;/span&gt;
      .split(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;payload.items&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, (&lt;span class="pl-stj"&gt;Consumer&lt;/span&gt;) &lt;span class="pl-c1"&gt;null&lt;/span&gt;)                           &lt;span class="pl-c"&gt;// 15&lt;/span&gt;
      .channel(&lt;span class="pl-stj"&gt;MessageChannels&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;executor(&lt;span class="pl-stj"&gt;Executors&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;newCachedThreadPool()))&lt;span class="pl-c"&gt;// 16&lt;/span&gt;
      .route(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;payload.iced&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,                                             &lt;span class="pl-c"&gt;// 17&lt;/span&gt;
        &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;Consumer&amp;lt;&lt;span class="pl-st"&gt;RouterSpec&amp;lt;&lt;span class="pl-stj"&gt;ExpressionEvaluatingRouter&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;gt;&lt;/span&gt;() {         &lt;span class="pl-c"&gt;// 18&lt;/span&gt;

          &lt;span class="pl-st"&gt;@Override&lt;/span&gt;
          &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-st"&gt;void&lt;/span&gt; &lt;span class="pl-en"&gt;accept&lt;/span&gt;(&lt;span class="pl-st"&gt;RouterSpec&amp;lt;&lt;span class="pl-stj"&gt;ExpressionEvaluatingRouter&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-v"&gt;spec&lt;/span&gt;) {
            spec&lt;span class="pl-k"&gt;.&lt;/span&gt;channelMapping(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;true&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;iced&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
                .channelMapping(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;false&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;hot&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;);                         &lt;span class="pl-c"&gt;// 19&lt;/span&gt;
          }

        })
      .get();                                                            &lt;span class="pl-c"&gt;// 20&lt;/span&gt;
  }

  &lt;span class="pl-st"&gt;@Bean&lt;/span&gt;
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; &lt;span class="pl-en"&gt;icedFlow&lt;/span&gt;() {                                    &lt;span class="pl-c"&gt;// 21&lt;/span&gt;
    &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlows&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;from(&lt;span class="pl-stj"&gt;MessageChannels&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;queue(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;iced&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-c1"&gt;10&lt;/span&gt;))      &lt;span class="pl-c"&gt;// 22&lt;/span&gt;
      .handle(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;GenericHandler&amp;lt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;&amp;gt;&lt;/span&gt;() {                          &lt;span class="pl-c"&gt;// 23&lt;/span&gt;

        &lt;span class="pl-st"&gt;@Override&lt;/span&gt;
        &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Object&lt;/span&gt; &lt;span class="pl-en"&gt;handle&lt;/span&gt;(&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt; &lt;span class="pl-v"&gt;payload&lt;/span&gt;, &lt;span class="pl-st"&gt;Map&amp;lt;&lt;span class="pl-stj"&gt;String&lt;/span&gt;, &lt;span class="pl-stj"&gt;Object&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-v"&gt;headers&lt;/span&gt;) {
          &lt;span class="pl-stj"&gt;Uninterruptibles&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;sleepUninterruptibly(&lt;span class="pl-c1"&gt;1&lt;/span&gt;, &lt;span class="pl-stj"&gt;TimeUnit&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;SECONDS&lt;/span&gt;);
          &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(&lt;span class="pl-stj"&gt;Thread&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;currentThread()&lt;span class="pl-k"&gt;.&lt;/span&gt;getName()
            &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; prepared cold drink #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; coldDrinkCounter&lt;span class="pl-k"&gt;.&lt;/span&gt;incrementAndGet()
            &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; for order #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; payload&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber() &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;: &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; payload);
          &lt;span class="pl-k"&gt;return&lt;/span&gt; payload;                                                &lt;span class="pl-c"&gt;// 24&lt;/span&gt;
        }

      })
      .channel(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;output&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)                                                 &lt;span class="pl-c"&gt;// 25&lt;/span&gt;
      .get();
  }

  &lt;span class="pl-st"&gt;@Bean&lt;/span&gt;
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; &lt;span class="pl-en"&gt;hotFlow&lt;/span&gt;() {                                     &lt;span class="pl-c"&gt;// 26&lt;/span&gt;
    &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlows&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;from(&lt;span class="pl-stj"&gt;MessageChannels&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;queue(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;hot&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-c1"&gt;10&lt;/span&gt;))
      .handle(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;GenericHandler&amp;lt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;&amp;gt;&lt;/span&gt;() {

        &lt;span class="pl-st"&gt;@Override&lt;/span&gt;
        &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Object&lt;/span&gt; &lt;span class="pl-en"&gt;handle&lt;/span&gt;(&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt; &lt;span class="pl-v"&gt;payload&lt;/span&gt;, &lt;span class="pl-st"&gt;Map&amp;lt;&lt;span class="pl-stj"&gt;String&lt;/span&gt;, &lt;span class="pl-stj"&gt;Object&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-v"&gt;headers&lt;/span&gt;) {
          &lt;span class="pl-stj"&gt;Uninterruptibles&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;sleepUninterruptibly(&lt;span class="pl-c1"&gt;5&lt;/span&gt;, &lt;span class="pl-stj"&gt;TimeUnit&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;SECONDS&lt;/span&gt;);    &lt;span class="pl-c"&gt;// 27&lt;/span&gt;
          &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(&lt;span class="pl-stj"&gt;Thread&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;currentThread()&lt;span class="pl-k"&gt;.&lt;/span&gt;getName()
            &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; prepared hot drink #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; hotDrinkCounter&lt;span class="pl-k"&gt;.&lt;/span&gt;incrementAndGet()
            &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; for order #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; payload&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber() &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;: &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; payload);
          &lt;span class="pl-k"&gt;return&lt;/span&gt; payload;
        }

      })
      .channel(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;output&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
      .get();
  }

  &lt;span class="pl-st"&gt;@Bean&lt;/span&gt;
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; &lt;span class="pl-en"&gt;resultFlow&lt;/span&gt;() {                                  &lt;span class="pl-c"&gt;// 28&lt;/span&gt;
    &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlows&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;from(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;output&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)                               &lt;span class="pl-c"&gt;// 29&lt;/span&gt;
      .transform(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;GenericTransformer&amp;lt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;Drink&lt;/span&gt;&amp;gt;&lt;/span&gt;() {            &lt;span class="pl-c"&gt;// 30&lt;/span&gt;

        &lt;span class="pl-st"&gt;@Override&lt;/span&gt;
        &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Drink&lt;/span&gt; &lt;span class="pl-en"&gt;transform&lt;/span&gt;(&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt; &lt;span class="pl-v"&gt;orderItem&lt;/span&gt;) {
          &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Drink&lt;/span&gt;(orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber(),
            orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getDrinkType(),
            orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;isIced(),
            orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getShots());                                       &lt;span class="pl-c"&gt;// 31&lt;/span&gt;
        }

      })
      .aggregate(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;Consumer&amp;lt;&lt;span class="pl-stj"&gt;AggregatorSpec&lt;/span&gt;&amp;gt;&lt;/span&gt;() {                        &lt;span class="pl-c"&gt;// 32&lt;/span&gt;

        &lt;span class="pl-st"&gt;@Override&lt;/span&gt;
        &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-st"&gt;void&lt;/span&gt; &lt;span class="pl-en"&gt;accept&lt;/span&gt;(&lt;span class="pl-stj"&gt;AggregatorSpec&lt;/span&gt; &lt;span class="pl-v"&gt;aggregatorSpec&lt;/span&gt;) {
          aggregatorSpec&lt;span class="pl-k"&gt;.&lt;/span&gt;processor(cafeAggregator, &lt;span class="pl-c1"&gt;null&lt;/span&gt;);                &lt;span class="pl-c"&gt;// 33&lt;/span&gt;
        }

      }, &lt;span class="pl-c1"&gt;null&lt;/span&gt;)
      .handle(&lt;span class="pl-stj"&gt;CharacterStreamWritingMessageHandler&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;stdout())             &lt;span class="pl-c"&gt;// 34&lt;/span&gt;
    .get();
  }


  &lt;span class="pl-st"&gt;@Component&lt;/span&gt;
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;static&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;CafeAggregator&lt;/span&gt; {                                   &lt;span class="pl-c"&gt;// 35&lt;/span&gt;

    &lt;span class="pl-st"&gt;@Aggregator&lt;/span&gt;                                                          &lt;span class="pl-c"&gt;// 36&lt;/span&gt;
    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Delivery&lt;/span&gt; &lt;span class="pl-en"&gt;output&lt;/span&gt;(&lt;span class="pl-st"&gt;List&amp;lt;&lt;span class="pl-stj"&gt;Drink&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-v"&gt;drinks&lt;/span&gt;) {
      &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Delivery&lt;/span&gt;(drinks);
    }

    &lt;span class="pl-st"&gt;@CorrelationStrategy&lt;/span&gt;                                                 &lt;span class="pl-c"&gt;// 37&lt;/span&gt;
    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Integer&lt;/span&gt; &lt;span class="pl-en"&gt;correlation&lt;/span&gt;(&lt;span class="pl-stj"&gt;Drink&lt;/span&gt; &lt;span class="pl-v"&gt;drink&lt;/span&gt;) {
      &lt;span class="pl-k"&gt;return&lt;/span&gt; drink&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber();
    }

  }

}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Examining the code line by line...&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line1"&gt;&lt;/a&gt;
1.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;SpringBootApplication&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This new meta-annotation from Spring Boot 1.2. Includes &lt;code&gt;@Configuration&lt;/code&gt; and
&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;. Since we are in a Spring Integration application and Spring Boot has auto-configuration
for it, the &lt;code&gt;@EnableIntegration&lt;/code&gt; is automatically applied, to initialize the Spring Integration infrastructure including an
environment for the Java DSL - &lt;code&gt;DslIntegrationConfigurationInitializer&lt;/code&gt;, which is picked up by the
&lt;code&gt;IntegrationConfigurationBeanFactoryPostProcessor&lt;/code&gt; from &lt;code&gt;/META-INF/spring.factories&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line2"&gt;&lt;/a&gt;
2.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;IntegrationComponentScan&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The Spring Integration analogue of &lt;code&gt;@ComponentScan&lt;/code&gt; to scan components based on
interfaces, (the Spring Framework's &lt;code&gt;@ComponentScan&lt;/code&gt; only looks at classes). Spring Integration supports the discovery of interfaces
annotated with &lt;code&gt;@MessagingGateway&lt;/code&gt; (see #7 below).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line3"&gt;&lt;/a&gt;
3.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-stj"&gt;ConfigurableApplicationContext&lt;/span&gt; ctx &lt;span class="pl-k"&gt;=&lt;/span&gt;
             &lt;span class="pl-stj"&gt;SpringApplication&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;run(&lt;span class="pl-stj"&gt;Application&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class, args);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;main&lt;/code&gt; method of our class is designed to start the Spring Boot application using the
configuration from this class and starts an &lt;code&gt;ApplicationContext&lt;/code&gt; via Spring Boot. In addition, it delegates command
line arguments to the Spring Boot. For example you can specify &lt;code&gt;--debug&lt;/code&gt; to see logs for the boot auto-configuration report.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line4"&gt;&lt;/a&gt;
4.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-stj"&gt;Cafe&lt;/span&gt; cafe &lt;span class="pl-k"&gt;=&lt;/span&gt; ctx&lt;span class="pl-k"&gt;.&lt;/span&gt;getBean(&lt;span class="pl-stj"&gt;Cafe&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Since we already have an &lt;code&gt;ApplicationContext&lt;/code&gt; we can start to interact with application. And &lt;code&gt;Cafe&lt;/code&gt;
is that entry point - in EIP terms a &lt;code&gt;gateway&lt;/code&gt;. Gateways are simply interfaces and the application does not interact
with the Messaging API; it simply deals with the domain (see #7 below).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line5"&gt;&lt;/a&gt;
5.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;for&lt;/span&gt; (&lt;span class="pl-st"&gt;int&lt;/span&gt; i &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;; i &lt;span class="pl-k"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;100&lt;/span&gt;; i&lt;span class="pl-k"&gt;++&lt;/span&gt;) {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To demonstrate the cafe "work" we intiate 100 orders with two drinks - one hot and one iced. And send the &lt;code&gt;Order&lt;/code&gt; to the &lt;code&gt;Cafe&lt;/code&gt; gateway.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line6"&gt;&lt;/a&gt;
6.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Hit 'Enter' to terminate&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Typically Spring Integration application are asynchronous, hence to avoid early exit from the &lt;code&gt;main&lt;/code&gt; Thread we block the
&lt;code&gt;main&lt;/code&gt; method until some end-user interaction through the command line. Non daemon threads will keep the application
open but &lt;code&gt;System.read()&lt;/code&gt; provides us with a mechanism to close the application cleanly.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line7"&gt;&lt;/a&gt;
7.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;MessagingGateway&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The annotation to mark a business interface to indicate it is a &lt;code&gt;gateway&lt;/code&gt; between the
end-application and integration layer. It is an analogue of &lt;code&gt;&amp;lt;gateway /&amp;gt;&lt;/code&gt; component from Spring Integration XML
configuration. Spring Integration creates a &lt;code&gt;Proxy&lt;/code&gt; for this interface and populates it as a bean in the
application context. The purpose of this &lt;code&gt;Proxy&lt;/code&gt; is to wrap parameters in a &lt;code&gt;Message&amp;lt;?&amp;gt;&lt;/code&gt; object and send it to the
&lt;code&gt;MessageChannel&lt;/code&gt; according to the provided options.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line8"&gt;&lt;/a&gt;
8.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@Gateway(requestChannel &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;orders.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The method level annotation to distinct business logic by methods as well as by the target
integration flows. In this sample we use a &lt;code&gt;requestChannel&lt;/code&gt; reference of &lt;code&gt;orders.input&lt;/code&gt;, which is a &lt;code&gt;MessageChannel&lt;/code&gt;
bean name of our &lt;code&gt;IntegrationFlow&lt;/code&gt; input channel (see below #14).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line9"&gt;&lt;/a&gt;
9.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-st"&gt;void&lt;/span&gt; placeOrder(&lt;span class="pl-stj"&gt;Order&lt;/span&gt; order);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The interface method is a central point to interact from end-application with the integration layer. This method has a
&lt;code&gt;void&lt;/code&gt; return type. It means that our integration flow is &lt;code&gt;one-way&lt;/code&gt; and we just send messages to the integration flow, but don't wait for a reply.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line10"&gt;&lt;/a&gt;
10.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt; hotDrinkCounter &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt;();
&lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt; coldDrinkCounter &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt;();&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Two counters to gather the information how our cafe works with drinks.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line11"&gt;&lt;/a&gt;
11.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Autowired&lt;/span&gt;
&lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;CafeAggregator&lt;/span&gt; cafeAggregator;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The POJO for the &lt;code&gt;Aggregator&lt;/code&gt; logic (see #33 and #35 below). Since it is a Spring bean, we can simply inject it even to the current &lt;code&gt;@Configuration&lt;/code&gt; and use in any place below, e.g. from the &lt;code&gt;.aggregate()&lt;/code&gt; EIP-method.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line12"&gt;&lt;/a&gt;
12.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@Bean(name &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-stj"&gt;PollerMetadata&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;DEFAULT_POLLER&lt;/span&gt;)
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;PollerMetadata&lt;/span&gt; poller() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;default&lt;/code&gt; &lt;code&gt;poller&lt;/code&gt; bean. It is a analogue of &lt;code&gt;&amp;lt;poller default="true"&amp;gt;&lt;/code&gt; component from Spring Integration XML configuration. Required for endpoints where the &lt;code&gt;inputChannel&lt;/code&gt; is a &lt;code&gt;PollableChannel&lt;/code&gt;. In this case, it is necessary for the
two Cafe &lt;code&gt;queues&lt;/code&gt; - hot and iced (see below #18). Here we use the &lt;code&gt;Pollers&lt;/code&gt; factory from the DSL project and use its
method-chain fluent API to build the poller metadata. Note that &lt;code&gt;Pollers&lt;/code&gt; can be used directly from an &lt;code&gt;IntegrationFlow&lt;/code&gt; definition,
if a specific &lt;code&gt;poller&lt;/code&gt; (rather than the default poller) is needed for an endpoint.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line13"&gt;&lt;/a&gt;
13.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Bean&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; orders() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;IntegrationFlow&lt;/code&gt; bean definition. It is the central component of the Spring Integration Java DSL, although it does not play any role at runtime, just during the bean registration phase. All other code below registers Spring Integration components (&lt;code&gt;MessageChannel&lt;/code&gt;, &lt;code&gt;MessageHandler&lt;/code&gt;, &lt;code&gt;EventDrivenConsumer&lt;/code&gt;, &lt;code&gt;MessageProducer&lt;/code&gt;, &lt;code&gt;MessageSource&lt;/code&gt; etc.) in the &lt;code&gt;IntegrationFlow&lt;/code&gt; object, which is parsed by the &lt;code&gt;IntegrationFlowBeanPostProcessor&lt;/code&gt; to process those components and register them as beans in the application context as necessary (some elements, such as channels may already exist).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line14"&gt;&lt;/a&gt;
14.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlows&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;from(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;orders.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;IntegrationFlows&lt;/code&gt; is the main &lt;code&gt;factory&lt;/code&gt; class to start the &lt;code&gt;IntegrationFlow&lt;/code&gt;. It provides a number of overloaded &lt;code&gt;.from()&lt;/code&gt; methods to allow starting a flow from a &lt;code&gt;SourcePollingChannelAdapter&lt;/code&gt; for a &lt;code&gt;MessageSource&amp;lt;?&amp;gt;&lt;/code&gt; implementations, e.g. &lt;code&gt;JdbcPollingChannelAdapter&lt;/code&gt;; from a &lt;code&gt;MessageProducer&lt;/code&gt;, e.g. &lt;code&gt;WebSocketInboundChannelAdapter&lt;/code&gt;; or simply a &lt;code&gt;MessageChannel&lt;/code&gt;. All ".from()" options have several convenient variants to configure the appropriate component for the start of the &lt;code&gt;IntegrationFlow&lt;/code&gt;. Here we use just a channel name, which is converted to a &lt;code&gt;DirectChannel&lt;/code&gt; bean definition during the bean definition phase while parsing the &lt;code&gt;IntegrationFlow&lt;/code&gt;. In the Java 8 variant, we used here a &lt;code&gt;Lambda definition&lt;/code&gt; - and this &lt;code&gt;MessageChannel&lt;/code&gt; has been implicitly created with the bean name based on the &lt;code&gt;IntegrationFlow&lt;/code&gt; bean name.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line15"&gt;&lt;/a&gt;
15.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.split(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;payload.items&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, (&lt;span class="pl-stj"&gt;Consumer&lt;/span&gt;) &lt;span class="pl-c1"&gt;null&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Since our integration flow accepts messages through the &lt;code&gt;orders.input&lt;/code&gt; channel, we are ready to consume and process them. The first EIP-method in our scenario is &lt;code&gt;.split()&lt;/code&gt;. We know that the message &lt;code&gt;payload&lt;/code&gt; from &lt;code&gt;orders.input&lt;/code&gt; channel is an &lt;code&gt;Order&lt;/code&gt; domain object, so we can simply use here a Spring (SpEL) Expression to return &lt;code&gt;Collection&amp;lt;OrderItem&amp;gt;&lt;/code&gt;. So, this performs the &lt;code&gt;split&lt;/code&gt; EI pattern, and we send each collection entry as a separate message to the next channel. In the background, the &lt;code&gt;.split()&lt;/code&gt; method registers a &lt;code&gt;ExpressionEvaluatingSplitter&lt;/code&gt; &lt;code&gt;MessageHandler&lt;/code&gt; implementation and an &lt;code&gt;EventDrivenConsumer&lt;/code&gt; for that &lt;code&gt;MessageHandler&lt;/code&gt;, wiring in the &lt;code&gt;orders.input&lt;/code&gt; channel as the &lt;code&gt;inputChannel&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The second argument for the &lt;code&gt;.split()&lt;/code&gt; EIP-method is for an &lt;code&gt;endpointConfigurer&lt;/code&gt; to
customize options like &lt;code&gt;autoStartup&lt;/code&gt;, &lt;code&gt;requiresReply&lt;/code&gt;, &lt;code&gt;adviceChain&lt;/code&gt; etc. We use here &lt;code&gt;null&lt;/code&gt; to show that we rely
on the default options for the endpoint. Many of EIP-methods provide overloaded versions with and without
&lt;code&gt;endpointConfigurer&lt;/code&gt;. Currently &lt;code&gt;.split(String expression)&lt;/code&gt; EIP-method without the &lt;code&gt;endpointConfigurer&lt;/code&gt; argument is not available; this will be addressed in a future release.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line16"&gt;&lt;/a&gt;
16.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.channel(&lt;span class="pl-stj"&gt;MessageChannels&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;executor(&lt;span class="pl-stj"&gt;Executors&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;newCachedThreadPool()))&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.channel()&lt;/code&gt; EIP-method allows the specification of concrete &lt;code&gt;MessageChannel&lt;/code&gt;s between endpoints, as it is done via
&lt;code&gt;output-channel&lt;/code&gt;/&lt;code&gt;input-channel&lt;/code&gt; attributes pair with Spring Integration XML configuration. By default, endpoints in the
DSL integration flow definition are wired with &lt;code&gt;DirectChannel&lt;/code&gt;s, which get bean names based on the &lt;code&gt;IntegrationFlow&lt;/code&gt;
bean name and &lt;code&gt;index&lt;/code&gt; in the flow chain. In this case we select a
specific &lt;code&gt;MessageChannel&lt;/code&gt; implementation from the &lt;code&gt;Channels&lt;/code&gt; factory class; the selected
channel here is an &lt;code&gt;ExecutorChannel&lt;/code&gt;, to allow distribution of messages from the &lt;code&gt;splitter&lt;/code&gt; to separate &lt;code&gt;Thread&lt;/code&gt;s, to process
them in parallel in the downstream flow.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line17"&gt;&lt;/a&gt;
17.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.route(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;payload.iced&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The next EIP-method in our scenario is &lt;code&gt;.route()&lt;/code&gt;, to send &lt;code&gt;hot/iced&lt;/code&gt; order items to different Cafe kitchens. We again use here a SpEL expression to get the &lt;code&gt;routingKey&lt;/code&gt; from the incoming message. In the Java 8 variant, we used a &lt;code&gt;method-reference&lt;/code&gt; Lambda expression, but for pre Java 8 style we must use SpEL or an inline interface implementation. Many anonymous classes in a flow can make the flow difficult to read so we prefer SpEL in most cases.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line18"&gt;&lt;/a&gt;
18.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;Consumer&amp;lt;&lt;span class="pl-st"&gt;RouterSpec&amp;lt;&lt;span class="pl-stj"&gt;ExpressionEvaluatingRouter&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;gt;&lt;/span&gt;() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The second argument of &lt;code&gt;.route()&lt;/code&gt; EIP-method is a functional interface &lt;code&gt;Consumer&lt;/code&gt; to specify &lt;code&gt;ExpressionEvaluatingRouter&lt;/code&gt; options using a &lt;code&gt;RouterSpec&lt;/code&gt; Builder. Since we don't have any choice with pre Java 8, we just provide here an inline implementation for this interface.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line19"&gt;&lt;/a&gt;
19.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;spec&lt;span class="pl-k"&gt;.&lt;/span&gt;channelMapping(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;true&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;iced&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
    .channelMapping(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;false&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;hot&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;With the &lt;code&gt;Consumer&amp;lt;RouterSpec&amp;lt;ExpressionEvaluatingRouter&amp;gt;&amp;gt;#accept()&lt;/code&gt; implementation we can provide desired &lt;code&gt;AbstractMappingMessageRouter&lt;/code&gt; options. One of them is &lt;code&gt;channelMappings&lt;/code&gt;, when we specify the routing logic by the result of router expresion and the target &lt;code&gt;MessageChannel&lt;/code&gt; for the apropriate result. In this case &lt;code&gt;iced&lt;/code&gt; and &lt;code&gt;hot&lt;/code&gt; are &lt;code&gt;MessageChannel&lt;/code&gt; names for &lt;code&gt;IntegrationFlow&lt;/code&gt;s below.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line20"&gt;&lt;/a&gt;
20.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.get();&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This finalizes the flow.
Any &lt;code&gt;IntegrationFlows.from()&lt;/code&gt; method returns an &lt;code&gt;IntegrationFlowBuilder&lt;/code&gt; instance and this &lt;code&gt;get()&lt;/code&gt; method extracts an &lt;code&gt;IntegrationFlow&lt;/code&gt; object from the &lt;code&gt;IntegrationFlowBuilder&lt;/code&gt; configuration. Everything starting from the  &lt;code&gt;.from()&lt;/code&gt; and up to the method before the &lt;code&gt;.get()&lt;/code&gt; is an &lt;code&gt;IntegrationFlow&lt;/code&gt; definition. All defined components are stored in the &lt;code&gt;IntegrationFlow&lt;/code&gt; and processed by the &lt;code&gt;IntegrationFlowBeanPostProcessor&lt;/code&gt; during the bean creation phase.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line21"&gt;&lt;/a&gt;
21.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Bean&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; icedFlow() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This is the second &lt;code&gt;IntegrationFlow&lt;/code&gt; bean definition - for &lt;code&gt;iced&lt;/code&gt; drinks. Here we demonstrate that several &lt;code&gt;IntegrationFlow&lt;/code&gt;s
can be wired together to create a single complex application. Note: it isn't recommended to inject one &lt;code&gt;IntegrationFlow&lt;/code&gt; to
another; it might cause unexpected behaviour. Since they provide Integration components for the bean registration and
&lt;code&gt;MessageChannel&lt;/code&gt;s one of them, the best way to wire and inject is via &lt;code&gt;MessageChannel&lt;/code&gt; or &lt;code&gt;@MessagingGateway&lt;/code&gt;
interfaces.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line22"&gt;&lt;/a&gt;
22.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlows&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;from(&lt;span class="pl-stj"&gt;MessageChannels&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;queue(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;iced&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-c1"&gt;10&lt;/span&gt;))&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;iced&lt;/code&gt; &lt;code&gt;IntegrationFlow&lt;/code&gt; starts from a &lt;code&gt;QueueChannel&lt;/code&gt; that has a capacity of &lt;code&gt;10&lt;/code&gt; messages; it is registered as a bean with the name &lt;code&gt;iced&lt;/code&gt;.
As you remember we use this name as one of the route mappings (see above #19).&lt;/p&gt;

&lt;p&gt;In our sample, we use here a restricted
&lt;code&gt;QueueChannel&lt;/code&gt; to reflect the Cafe kitchen busy state from real life. And here is a place where we need that
&lt;code&gt;global poller&lt;/code&gt; for the next endpoint which is listening on this channel.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line23"&gt;&lt;/a&gt;
23.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.handle(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;GenericHandler&amp;lt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;&amp;gt;&lt;/span&gt;() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.handle()&lt;/code&gt; EIP-method of the &lt;code&gt;iced&lt;/code&gt; flow demonstrates the concrete Cafe kitchen work. Since we can't minimize
the code with something like Java 8 Lambda expression, we provide here an inline implementation for the &lt;code&gt;GenericHandler&lt;/code&gt;
functional interface with the expected &lt;code&gt;payload&lt;/code&gt; type as the generic argument. With the Java 8 example, we distribute this &lt;code&gt;.handle()&lt;/code&gt;
between several subscriber subflows for a &lt;code&gt;PublishSubscribeChannel&lt;/code&gt;. However in this case, the logic is all
implemented in the one method.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line24"&gt;&lt;/a&gt;
24.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-stj"&gt;Uninterruptibles&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;sleepUninterruptibly(&lt;span class="pl-c1"&gt;1&lt;/span&gt;, &lt;span class="pl-stj"&gt;TimeUnit&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;SECONDS&lt;/span&gt;);
&lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(&lt;span class="pl-stj"&gt;Thread&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;currentThread()&lt;span class="pl-k"&gt;.&lt;/span&gt;getName()
      &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; prepared cold drink #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; coldDrinkCounter&lt;span class="pl-k"&gt;.&lt;/span&gt;incrementAndGet()
      &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; for order #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; payload&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber() &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;: &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; payload);
&lt;span class="pl-k"&gt;return&lt;/span&gt; payload;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The business logic implementation for the current &lt;code&gt;.handle()&lt;/code&gt; EIP-component. With
&lt;code&gt;Uninterruptibles.sleepUninterruptibly(1, TimeUnit.SECONDS);&lt;/code&gt; we just block the current &lt;code&gt;Thread&lt;/code&gt; for some timeout to demonstrate how
quickly the Cafe kitchen prepares a drink. After that we just report to &lt;code&gt;STDOUT&lt;/code&gt; that the drink is ready and
return the current &lt;code&gt;OrderItem&lt;/code&gt; from the &lt;code&gt;GenericHandler&lt;/code&gt; for the next endpoint in our &lt;code&gt;IntegrationFlow&lt;/code&gt;. In the
background, the DSL framework registers a &lt;code&gt;ServiceActivatingHandler&lt;/code&gt; for the &lt;code&gt;MethodInvokingMessageProcessor&lt;/code&gt; to invoke the
&lt;code&gt;GenericHandler#handle&lt;/code&gt; at runtime. In addition, the framework registers a &lt;code&gt;PollingConsumer&lt;/code&gt; endpoint for the
&lt;code&gt;QueueChannel&lt;/code&gt; above. This endpoint relies on the &lt;code&gt;default poller&lt;/code&gt; to poll messages from the queue. Of course, we
always can use a specific &lt;code&gt;poller&lt;/code&gt; for any concrete endpoint. In that case, we would have to provide a second
&lt;code&gt;endpointConfigurer&lt;/code&gt; argument to the &lt;code&gt;.handle()&lt;/code&gt; EIP-method.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line25"&gt;&lt;/a&gt;
25.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.channel(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;output&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Since it is not the end of our Cafe scenario, we send the result of the current flow to the &lt;code&gt;output&lt;/code&gt; channel
using the convenient EIP-method &lt;code&gt;.channel()&lt;/code&gt; and the name of the &lt;code&gt;MessageChannel&lt;/code&gt; bean (see below #29). This is the logical
 end of the current iced drink subflow, so we use the &lt;code&gt;.get()&lt;/code&gt; method to return the &lt;code&gt;IntegrationFlow&lt;/code&gt;. Flows that end
 with a reply-producing handler that don't have a final &lt;code&gt;.channel()&lt;/code&gt; will return the reply to the message &lt;code&gt;replyChannel&lt;/code&gt; header.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line26"&gt;&lt;/a&gt;
26.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Bean&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; hotFlow() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;IntegrationFlow&lt;/code&gt; definition for &lt;code&gt;hot&lt;/code&gt; drinks. It is similar to the previous &lt;code&gt;iced&lt;/code&gt; drinks flow, but
with specific &lt;code&gt;hot&lt;/code&gt; business logic. It starts from the &lt;code&gt;hot&lt;/code&gt; &lt;code&gt;QueueChannel&lt;/code&gt; which is mapped from the router above.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line27"&gt;&lt;/a&gt;
27.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-stj"&gt;Uninterruptibles&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;sleepUninterruptibly(&lt;span class="pl-c1"&gt;5&lt;/span&gt;, &lt;span class="pl-stj"&gt;TimeUnit&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;SECONDS&lt;/span&gt;);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;sleepUninterruptibly&lt;/code&gt; for &lt;code&gt;hot&lt;/code&gt; drinks. Right, we need more time to boil the water!&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line28"&gt;&lt;/a&gt;
28.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Bean&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; resultFlow() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;One more &lt;code&gt;IntegrationFlow&lt;/code&gt; bean definition to prepare the &lt;code&gt;Delivery&lt;/code&gt; for the Cafe client based on the &lt;code&gt;Drink&lt;/code&gt;s.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line29"&gt;&lt;/a&gt;
29.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlows&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;from(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;output&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;resultFlow&lt;/code&gt; starts from the &lt;code&gt;DirectChannel&lt;/code&gt;, which is created during the bean definition phase with this
provided name. You should remember that we use the &lt;code&gt;output&lt;/code&gt; channel name from the Cafe kitchens flows in the last &lt;code&gt;.channel()&lt;/code&gt; in
those definitions.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line30"&gt;&lt;/a&gt;
30.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.transform(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;GenericTransformer&amp;lt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;Drink&lt;/span&gt;&amp;gt;&lt;/span&gt;() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.transform()&lt;/code&gt; EIP-method is for the appropriate pattern implementation and expects some object to convert one
payload to another. In our sample we use an inline implementation of the &lt;code&gt;GenericTransformer&lt;/code&gt; functional interface to
 convert &lt;code&gt;OrderItem&lt;/code&gt; to &lt;code&gt;Drink&lt;/code&gt; and we specify that using generic arguments. In the background, the DSL framework
 registers a &lt;code&gt;MessageTransformingHandler&lt;/code&gt; and an &lt;code&gt;EventDrivenConsumer&lt;/code&gt; endpoint with default options to consume messages
 from the &lt;code&gt;output&lt;/code&gt; &lt;code&gt;MessageChannel&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line31"&gt;&lt;/a&gt;
31.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Drink&lt;/span&gt; transform(&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt; orderItem) {
  &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Drink&lt;/span&gt;(orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber(),
    orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getDrinkType(),
    orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;isIced(),
    orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getShots());
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The business-specific &lt;code&gt;GenericTransformer#transform()&lt;/code&gt; implementation to demonstrate how we benefit from Java
Generics to transform one &lt;code&gt;payload&lt;/code&gt; to another. Note: Spring Integration uses &lt;code&gt;ConversionService&lt;/code&gt; before
any method invocation and if you provide some specific &lt;code&gt;Converter&lt;/code&gt; implementation, some domain &lt;code&gt;payload&lt;/code&gt; can be
converted to another automatically, when the framework has an appropriate registered &lt;code&gt;Converter&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line32"&gt;&lt;/a&gt;
32.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.aggregate(&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-st"&gt;Consumer&amp;lt;&lt;span class="pl-stj"&gt;AggregatorSpec&lt;/span&gt;&amp;gt;&lt;/span&gt;() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.aggregate()&lt;/code&gt; EIP-method provides options to configure an &lt;code&gt;AggregatingMessageHandler&lt;/code&gt; and its endpoint,
similar to what we can do with the &lt;code&gt;&amp;lt;aggregator&amp;gt;&lt;/code&gt; component when using Spring Integration XML configuration. Of course, with the Java DSL
we have more power to configure the aggregator in place, without any other extra beans. However we demonstrate
here an aggregator configuration with annotations (see below #35).
From the Cafe business logic perspective we compose the &lt;code&gt;Delivery&lt;/code&gt; for the initial &lt;code&gt;Order&lt;/code&gt;, since we &lt;code&gt;.split()&lt;/code&gt; the original order
to the &lt;code&gt;OrderItem&lt;/code&gt;s near the beginning.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line33"&gt;&lt;/a&gt;
33.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-st"&gt;void&lt;/span&gt; accept(&lt;span class="pl-stj"&gt;AggregatorSpec&lt;/span&gt; aggregatorSpec) {
     aggregatorSpec&lt;span class="pl-k"&gt;.&lt;/span&gt;processor(cafeAggregator, &lt;span class="pl-c1"&gt;null&lt;/span&gt;);
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;An inline implementation of the &lt;code&gt;Consumer&lt;/code&gt; for the &lt;code&gt;AggregatorSpec&lt;/code&gt;. Using the &lt;code&gt;aggregatorSpec&lt;/code&gt; Builder we can provide
desired options for the &lt;code&gt;aggregator&lt;/code&gt; component, which will be registered as an &lt;code&gt;AggregatingMessageHandler&lt;/code&gt; bean. Here we
just provide the &lt;code&gt;processor&lt;/code&gt; as a reference to the autowired (see #11 above) &lt;code&gt;CafeAggregator&lt;/code&gt; component (see #35 below).
The second argument of the &lt;code&gt;.processor()&lt;/code&gt; option is &lt;code&gt;methodName&lt;/code&gt;. Since we are relying on the aggregator
annotation configuration for the POJO, we don't need to provide the method here and the framework will determine the correct POJO methods
in the background.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line34"&gt;&lt;/a&gt;
34.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.handle(&lt;span class="pl-stj"&gt;CharacterStreamWritingMessageHandler&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;stdout())&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It is the end of our flow - the &lt;code&gt;Delivery&lt;/code&gt; is delivered to the client! We just print here the message &lt;code&gt;payload&lt;/code&gt;
to STDOUT using out-of-the-box &lt;code&gt;CharacterStreamWritingMessageHandler&lt;/code&gt; from Spring Integration Core. This is a
case to show how existing components from Spring Integration Core (and its modules) can be used from the Java DSL.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line35"&gt;&lt;/a&gt;
35.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Component&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;static&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;CafeAggregator&lt;/span&gt; {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The bean to specify the business logic for the &lt;code&gt;aggregator&lt;/code&gt; above. This bean is picked up by the &lt;code&gt;@ComponentScan&lt;/code&gt;,
which is a part of the &lt;code&gt;@SpringBootApplication&lt;/code&gt; meta-annotation (see above #1). So, this component becomes a bean
and we can automatically wire (&lt;code&gt;@Autowired&lt;/code&gt;) it to other components in the application context (see #11 above).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line36"&gt;&lt;/a&gt;
36.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Aggregator&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Delivery&lt;/span&gt; output(&lt;span class="pl-st"&gt;List&amp;lt;&lt;span class="pl-stj"&gt;Drink&lt;/span&gt;&amp;gt;&lt;/span&gt; drinks) {
   &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Delivery&lt;/span&gt;(drinks);
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The POJO-specific &lt;code&gt;MessageGroupProcessor&lt;/code&gt; to build the output &lt;code&gt;payload&lt;/code&gt; based on the payloads from aggregated
messages. Since we mark this method with the &lt;code&gt;@Aggregator&lt;/code&gt; annotation, the target &lt;code&gt;AggregatingMessageHandler&lt;/code&gt; can extract
this method for the &lt;code&gt;MethodInvokingMessageGroupProcessor&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line37"&gt;&lt;/a&gt;
37.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;CorrelationStrategy&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;Integer&lt;/span&gt; correlation(&lt;span class="pl-stj"&gt;Drink&lt;/span&gt; drink) {
   &lt;span class="pl-k"&gt;return&lt;/span&gt; drink&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber();
}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The POJO-specific &lt;code&gt;CorrelationStrategy&lt;/code&gt; to extract the custom &lt;code&gt;correlationKey&lt;/code&gt; from each inbound aggregator message.
Since we mark this method with &lt;code&gt;@CorrelationStrategy&lt;/code&gt; annotation the target &lt;code&gt;AggregatingMessageHandler&lt;/code&gt; can extract
this method for the &lt;code&gt;MethodInvokingCorrelationStrategy&lt;/code&gt;.
There is a similar self-explained &lt;code&gt;@ReleaseStrategy&lt;/code&gt; annotation, but we rely in our Cafe sample just on the default
&lt;code&gt;SequenceSizeReleaseStrategy&lt;/code&gt;, which is based on the &lt;code&gt;sequenceDetails&lt;/code&gt; message header populated by the &lt;code&gt;splitter&lt;/code&gt;
from the beginning of our integration flow.&lt;/p&gt;

&lt;p&gt;Well, we have finished describing the Cafe Demo sample based on the Spring Integration Java DSL when Java Lambda
support is not available.
Compare it with &lt;a href="https://github.com/spring-projects/spring-integration-samples/tree/master/applications/cafe/cafe-si"&gt;XML sample&lt;/a&gt;
and also see &lt;a href="https://spring.io/blog/2014/11/25/spring-integration-java-dsl-line-by-line-tutorial"&gt;Lambda support tutorial&lt;/a&gt;
to get more information regarding Spring Integration.&lt;/p&gt;

&lt;p&gt;As you can see, using the DSL without lambdas is a little more verbose because you need to provide boilerplate code
for inline anonymous implementations of functional interfaces. However, we believe it is important to support the use
of the DSL for users who can't yet move to Java 8. Many of the DSL benefits (fluent API, compile-time validation etc)
are available for all users.&lt;/p&gt;

&lt;p&gt;The use of lambdas continues the Spring Framework tradition of reducing or eliminating boilerplate code, so we encourage
users to try Java 8 and lambdas and to encourage their organizations to consider allowing the use of Java 8 for
Spring Integration applications.&lt;/p&gt;

&lt;p&gt;In addition see the &lt;a href="https://github.com/spring-projects/spring-integration-java-dsl/wiki/Spring-Integration-Java-DSL-Reference"&gt;Reference Manual&lt;/a&gt;
for more information.&lt;/p&gt;

&lt;p&gt;As always, we look forward to your comments and feedback (&lt;a href="http://stackoverflow.com"&gt;StackOverflow&lt;/a&gt;
(&lt;code&gt;spring-integration&lt;/code&gt; tag), &lt;a href="https://jira.spring.io/browse/INTEXT"&gt;Spring JIRA&lt;/a&gt;,
&lt;a href="https://github.com/spring-projects/spring-integration-java-dsl/issues"&gt;GitHub&lt;/a&gt;) and we very much welcome
&lt;a href="https://github.com/spring-projects/spring-integration/blob/master/CONTRIBUTING.md"&gt;contributions&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;Thank you for your time and patience to read this!&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>Spring Roo 1.3.1 RC1 available with important bug fixes</title>
    <link rel="alternate" href="https://spring.io/blog/2014/11/26/spring-roo-1-3-1-rc1-available-with-important-bug-fixes" />
    <category term="releases" label="Releases" />
    <author>
      <name>Pieter Humphrey</name>
    </author>
    <id>tag:spring.io,2014-11-26:1863</id>
    <updated>2014-11-26T10:21:00Z</updated>
    <content type="html">&lt;p&gt;Spring Roo 1.3.1 RC1 Release Candidate is available.&lt;/p&gt;

&lt;p&gt;Spring Roo jar files have been published to Maven Central. As always, the release is available in the Spring IO repository. &lt;/p&gt;

&lt;p&gt;The candidate release fixes serious issues: &lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt; running reverse engineering. &lt;/li&gt;
  &lt;li&gt; installing third-party addons. &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It is highly recommended that all Spring Roo users upgrade to this version. &lt;/p&gt;

&lt;p&gt;For full details on the changes made in the release, please refer to the &lt;a href="https://jira.spring.io/secure/ReleaseNote.jspa?projectId=10340&amp;amp;version=14836"&gt;Release Note in Jira&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For more project specific information please see the &lt;a href="http://projects.spring.io/spring-roo/"&gt;Project Page&lt;/a&gt; and &lt;a href="https://github.com/spring-projects/spring-roo"&gt;GitHub&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; Thanks to the awesome users who came up with useful bug reports and suggestions. This is a candidate release, please try out the updates and provide feedback. As always, you'll also find Roo on Twitter - either follow @SpringRoo or just include #SpringRoo in your tweets. Stay tuned!&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>Spring Integration Java DSL: Line by line tutorial</title>
    <link rel="alternate" href="https://spring.io/blog/2014/11/25/spring-integration-java-dsl-line-by-line-tutorial" />
    <category term="engineering" label="Engineering" />
    <author>
      <name>Artem Bilan</name>
    </author>
    <id>tag:spring.io,2014-11-25:1862</id>
    <updated>2014-11-25T13:10:00Z</updated>
    <content type="html">&lt;p&gt;Dear Spring Community!&lt;/p&gt;

&lt;p&gt;Just after the &lt;a href="https://spring.io/blog/2014/11/24/spring-integration-java-dsl-1-0-ga-released"&gt;Spring Integration Java DSL 1.0 GA&lt;/a&gt; release announcement I want to introduce the Spring Integration Java DSL to you as a line by line tutorial based on the
classic
&lt;a href="https://github.com/spring-projects/spring-integration-samples/tree/master/dsl/cafe-dsl"&gt;Cafe Demo&lt;/a&gt; integration sample.
We describe here &lt;a href="http://projects.spring.io/spring-boot/"&gt;Spring Boot&lt;/a&gt; support,
Spring Framework &lt;a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-java"&gt;Java and Annotation&lt;/a&gt;
configuration,
the &lt;a href="https://github.com/spring-projects/spring-integration-java-dsl/blob/master/src/main/java/org/springframework/integration/dsl/IntegrationFlow.java"&gt;&lt;code&gt;IntegrationFlow&lt;/code&gt;&lt;/a&gt;
feature and pay tribute to Java 8 &lt;a href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html"&gt;Lambda&lt;/a&gt;
support which was an inspiration for the DSL style. Of course, it is all backed by the
&lt;a href="http://projects.spring.io/spring-integration/"&gt;Spring Integration Core&lt;/a&gt; project.&lt;/p&gt;

&lt;p&gt;For those, who are not interested in Java 8 yet, we provide similar tutorial without Lambdas: &lt;a href="http://spring.io/blog/2014/12/01/spring-integration-java-dsl-pre-java-8-line-by-line-tutorial"&gt;Spring Integration Java DSL (pre Java 8): Line by line tutorial&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;But, before we launch into the description of the Cafe demonstration app here's a shorter example just to get started...&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Configuration&lt;/span&gt;
@&lt;span class="pl-stj"&gt;EnableAutoConfiguration&lt;/span&gt;
@&lt;span class="pl-stj"&gt;IntegrationComponentScan&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;Start&lt;/span&gt; {

    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;static&lt;/span&gt; &lt;span class="pl-st"&gt;void&lt;/span&gt; &lt;span class="pl-en"&gt;main&lt;/span&gt;(&lt;span class="pl-st"&gt;String&lt;/span&gt;[] &lt;span class="pl-v"&gt;args&lt;/span&gt;) &lt;span class="pl-s"&gt;throws&lt;/span&gt; &lt;span class="pl-stj"&gt;InterruptedException&lt;/span&gt; {
        &lt;span class="pl-stj"&gt;ConfigurableApplicationContext&lt;/span&gt; ctx &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-stj"&gt;SpringApplication&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;run(&lt;span class="pl-stj"&gt;Start&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class, args);

        &lt;span class="pl-st"&gt;List&amp;lt;&lt;span class="pl-stj"&gt;String&lt;/span&gt;&amp;gt;&lt;/span&gt; strings &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-stj"&gt;Arrays&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;asList(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;);
        &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(ctx&lt;span class="pl-k"&gt;.&lt;/span&gt;getBean(&lt;span class="pl-stj"&gt;Upcase&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class)&lt;span class="pl-k"&gt;.&lt;/span&gt;upcase(strings));

        ctx&lt;span class="pl-k"&gt;.&lt;/span&gt;close();
    }

    &lt;span class="pl-st"&gt;@MessagingGateway&lt;/span&gt;
    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;interface&lt;/span&gt; &lt;span class="pl-en"&gt;Upcase&lt;/span&gt; {

        &lt;span class="pl-st"&gt;@Gateway&lt;/span&gt;(&lt;span class="pl-c1"&gt;requestChannel&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;upcase.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
        &lt;span class="pl-st"&gt;Collection&amp;lt;&lt;span class="pl-stj"&gt;String&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;upcase&lt;/span&gt;(&lt;span class="pl-st"&gt;Collection&amp;lt;&lt;span class="pl-stj"&gt;String&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-v"&gt;strings&lt;/span&gt;);

    }

    &lt;span class="pl-st"&gt;@Bean&lt;/span&gt;
    &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; &lt;span class="pl-en"&gt;upcase&lt;/span&gt;() {
        &lt;span class="pl-k"&gt;return&lt;/span&gt; f &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; f
                .split()                                         &lt;span class="pl-c"&gt;// 1&lt;/span&gt;
                &lt;span class="pl-c1"&gt;.&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-stj"&gt;String&lt;/span&gt;, &lt;span class="pl-stj"&gt;String&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;transform(&lt;span class="pl-stj"&gt;String&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;toUpperCase)  &lt;span class="pl-c"&gt;// 2&lt;/span&gt;
                .aggregate();                                    &lt;span class="pl-c"&gt;// 3&lt;/span&gt;
    }

}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We will leave the description of the infrastructure (annotations etc) to the main cafe flow description. Here, we want you
to concentrate on the last &lt;code&gt;@Bean&lt;/code&gt;, the &lt;code&gt;IntegrationFlow&lt;/code&gt; as well as the gateway method which sends messages to that flow.&lt;/p&gt;

&lt;p&gt;In the &lt;code&gt;main&lt;/code&gt; method we send a collection of strings to the gateway and print the results to STDOUT. The flow first splits the collection into individual
&lt;code&gt;String&lt;/code&gt;s (1); each string is then transformed to upper case (2) and finally we re-aggregate them back into a collection (3)
Since that's the end of the flow, the framework returns the result of the aggregation back to the gateway and the new
payload becomes the return value from the gateway method.&lt;/p&gt;

&lt;p&gt;The equivalent XML configuration might be...&lt;/p&gt;

&lt;div class="highlight highlight-xml"&gt;&lt;pre&gt;&amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;gateway&lt;/span&gt; service &lt;span class="pl-e"&gt;interface&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo.Upcase&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-e"&gt;default-request-channel&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;upcase.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;

&amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;splitter&lt;/span&gt; &lt;span class="pl-e"&gt;input-channel&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;upcase.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-e"&gt;output-channel&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;transform&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;/&amp;gt;

&amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;transformer&lt;/span&gt; &lt;span class="pl-e"&gt;expression&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;payload.toUpperCase()&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
    &lt;span class="pl-e"&gt;input-channel&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;transform&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
    &lt;span class="pl-e"&gt;output-channel&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;aggregate&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; /&amp;gt;

&amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;aggregator&lt;/span&gt; &lt;span class="pl-e"&gt;input-channle&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;aggregate&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; /&amp;gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;or...&lt;/p&gt;

&lt;div class="highlight highlight-xml"&gt;&lt;pre&gt;&amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;gateway&lt;/span&gt; service &lt;span class="pl-e"&gt;interface&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo.Upcase&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-e"&gt;default-request-channel&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;upcase.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;

&amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;chain&lt;/span&gt; &lt;span class="pl-e"&gt;input-channel&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;upcase.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;splitter&lt;/span&gt; /&amp;gt;
    &amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;transformer&lt;/span&gt; &lt;span class="pl-e"&gt;expression&lt;/span&gt;=&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;payload.toUpperCase()&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; /&amp;gt;
    &amp;lt;&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;aggregator&lt;/span&gt; /&amp;gt;
&amp;lt;/&lt;span class="pl-ent"&gt;int&lt;/span&gt;&lt;span class="pl-ent"&gt;:&lt;/span&gt;&lt;span class="pl-ent"&gt;chain&lt;/span&gt;&amp;gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;
&lt;a id="user-content-cafe-demo" class="anchor" href="#cafe-demo" aria-hidden="true"&gt;&lt;span class="octicon octicon-link"&gt;&lt;/span&gt;&lt;/a&gt;Cafe Demo&lt;/h2&gt;

&lt;p&gt;The purpose of the &lt;code&gt;Cafe Demo&lt;/code&gt; application is to demonstrate how Enterprise Integration Patterns
(EIP) can be used to reflect the &lt;code&gt;order-delivery&lt;/code&gt;
scenario in a real life cafe. With this application, we handle several drink orders - hot and iced.
After running the application we can see in the standard output (&lt;code&gt;System.out.println&lt;/code&gt;) how cold drinks are prepared quicker
than hot. However the delivery for the whole order is postponed until the hot drink is ready.&lt;/p&gt;

&lt;p&gt;To reflect the domain model we have several classes: &lt;code&gt;Order&lt;/code&gt;, &lt;code&gt;OrderItem&lt;/code&gt;, &lt;code&gt;Drink&lt;/code&gt; and &lt;code&gt;Delivery&lt;/code&gt;.
They all are mentioned in the integration scenario, but we won't analyze them here, because they are simple enough.&lt;/p&gt;

&lt;p&gt;The source code for our application is placed only in a single class; significant lines are annotated with a number
corresponding to the comments, which follow:&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;SpringBootApplication&lt;/span&gt;               &lt;span class="pl-c"&gt;// 1&lt;/span&gt;
@&lt;span class="pl-stj"&gt;IntegrationComponentScan&lt;/span&gt;            &lt;span class="pl-c"&gt;// 2&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;class&lt;/span&gt; &lt;span class="pl-en"&gt;Application&lt;/span&gt; {

  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;static&lt;/span&gt; &lt;span class="pl-st"&gt;void&lt;/span&gt; &lt;span class="pl-en"&gt;main&lt;/span&gt;(&lt;span class="pl-st"&gt;String&lt;/span&gt;[] &lt;span class="pl-v"&gt;args&lt;/span&gt;) &lt;span class="pl-s"&gt;throws&lt;/span&gt; &lt;span class="pl-stj"&gt;Exception&lt;/span&gt; {
    &lt;span class="pl-stj"&gt;ConfigurableApplicationContext&lt;/span&gt; ctx &lt;span class="pl-k"&gt;=&lt;/span&gt;
                  &lt;span class="pl-stj"&gt;SpringApplication&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;run(&lt;span class="pl-stj"&gt;Application&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class, args);&lt;span class="pl-c"&gt;// 3&lt;/span&gt;

    &lt;span class="pl-stj"&gt;Cafe&lt;/span&gt; cafe &lt;span class="pl-k"&gt;=&lt;/span&gt; ctx&lt;span class="pl-k"&gt;.&lt;/span&gt;getBean(&lt;span class="pl-stj"&gt;Cafe&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class);                         &lt;span class="pl-c"&gt;// 4&lt;/span&gt;
    &lt;span class="pl-k"&gt;for&lt;/span&gt; (&lt;span class="pl-st"&gt;int&lt;/span&gt; i &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;; i &lt;span class="pl-k"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;100&lt;/span&gt;; i&lt;span class="pl-k"&gt;++&lt;/span&gt;) {                             &lt;span class="pl-c"&gt;// 5&lt;/span&gt;
       &lt;span class="pl-stj"&gt;Order&lt;/span&gt; order &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Order&lt;/span&gt;(i);
       order&lt;span class="pl-k"&gt;.&lt;/span&gt;addItem(&lt;span class="pl-stj"&gt;DrinkType&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;LATTE&lt;/span&gt;, &lt;span class="pl-c1"&gt;2&lt;/span&gt;, &lt;span class="pl-c1"&gt;false&lt;/span&gt;); &lt;span class="pl-c"&gt;//hot&lt;/span&gt;
       order&lt;span class="pl-k"&gt;.&lt;/span&gt;addItem(&lt;span class="pl-stj"&gt;DrinkType&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;MOCHA&lt;/span&gt;, &lt;span class="pl-c1"&gt;3&lt;/span&gt;, &lt;span class="pl-c1"&gt;true&lt;/span&gt;);  &lt;span class="pl-c"&gt;//iced&lt;/span&gt;
       cafe&lt;span class="pl-k"&gt;.&lt;/span&gt;placeOrder(order);
    }

    &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Hit 'Enter' to terminate&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;);              &lt;span class="pl-c"&gt;// 6&lt;/span&gt;
    &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;in&lt;span class="pl-k"&gt;.&lt;/span&gt;read();
    ctx&lt;span class="pl-k"&gt;.&lt;/span&gt;close();
  }

  &lt;span class="pl-st"&gt;@MessagingGateway&lt;/span&gt;                                              &lt;span class="pl-c"&gt;// 7&lt;/span&gt;
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-s"&gt;interface&lt;/span&gt; &lt;span class="pl-en"&gt;Cafe&lt;/span&gt; {

    &lt;span class="pl-st"&gt;@Gateway&lt;/span&gt;(&lt;span class="pl-c1"&gt;requestChannel&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;orders.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)                    &lt;span class="pl-c"&gt;// 8&lt;/span&gt;
    &lt;span class="pl-st"&gt;void&lt;/span&gt; &lt;span class="pl-en"&gt;placeOrder&lt;/span&gt;(&lt;span class="pl-stj"&gt;Order&lt;/span&gt; &lt;span class="pl-v"&gt;order&lt;/span&gt;);                                &lt;span class="pl-c"&gt;// 9&lt;/span&gt;

  }

  &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt; hotDrinkCounter &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt;();

  &lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt; coldDrinkCounter &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt;();  &lt;span class="pl-c"&gt;// 10&lt;/span&gt;

  &lt;span class="pl-st"&gt;@Bean&lt;/span&gt;(&lt;span class="pl-c1"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-stj"&gt;PollerMetadata&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;DEFAULT_POLLER&lt;/span&gt;)
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;PollerMetadata&lt;/span&gt; &lt;span class="pl-en"&gt;poller&lt;/span&gt;() {                               &lt;span class="pl-c"&gt;// 11&lt;/span&gt;
    &lt;span class="pl-k"&gt;return&lt;/span&gt; &lt;span class="pl-stj"&gt;Pollers&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;fixedDelay(&lt;span class="pl-c1"&gt;1000&lt;/span&gt;)&lt;span class="pl-k"&gt;.&lt;/span&gt;get();
  }

  &lt;span class="pl-st"&gt;@Bean&lt;/span&gt;
  &lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; &lt;span class="pl-en"&gt;orders&lt;/span&gt;() {                             &lt;span class="pl-c"&gt;// 12&lt;/span&gt;
    &lt;span class="pl-k"&gt;return&lt;/span&gt; f &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; f                                               &lt;span class="pl-c"&gt;// 13&lt;/span&gt;
      .split(&lt;span class="pl-stj"&gt;Order&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class, &lt;span class="pl-stj"&gt;Order&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;getItems)                      &lt;span class="pl-c"&gt;// 14&lt;/span&gt;
      .channel(c &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; c&lt;span class="pl-k"&gt;.&lt;/span&gt;executor(&lt;span class="pl-stj"&gt;Executors&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;newCachedThreadPool()))&lt;span class="pl-c"&gt;// 15&lt;/span&gt;
      &lt;span class="pl-c1"&gt;.&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;Boolean&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;route(&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;isIced, mapping &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; mapping &lt;span class="pl-c"&gt;// 16&lt;/span&gt;
        .subFlowMapping(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;true&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, sf &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sf                        &lt;span class="pl-c"&gt;// 17&lt;/span&gt;
          .channel(c &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; c&lt;span class="pl-k"&gt;.&lt;/span&gt;queue(&lt;span class="pl-c1"&gt;10&lt;/span&gt;))                            &lt;span class="pl-c"&gt;// 18&lt;/span&gt;
          .publishSubscribeChannel(c &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; c                       &lt;span class="pl-c"&gt;// 19&lt;/span&gt;
            .subscribe(s &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                                     &lt;span class="pl-c"&gt;// 20&lt;/span&gt;
              s&lt;span class="pl-k"&gt;.&lt;/span&gt;handle(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sleepUninterruptibly(&lt;span class="pl-c1"&gt;1&lt;/span&gt;, &lt;span class="pl-stj"&gt;TimeUnit&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;SECONDS&lt;/span&gt;)))&lt;span class="pl-c"&gt;// 21&lt;/span&gt;
            .subscribe(sub &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sub                               &lt;span class="pl-c"&gt;// 22&lt;/span&gt;
              &lt;span class="pl-c1"&gt;.&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;String&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;transform(item &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="pl-stj"&gt;Thread&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;currentThread()&lt;span class="pl-k"&gt;.&lt;/span&gt;getName()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; prepared cold drink #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-v"&gt;this&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;coldDrinkCounter&lt;span class="pl-k"&gt;.&lt;/span&gt;incrementAndGet()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; for order #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; item&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;: &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; item)                                 &lt;span class="pl-c"&gt;// 23&lt;/span&gt;
              .handle(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(m&lt;span class="pl-k"&gt;.&lt;/span&gt;getPayload())))))&lt;span class="pl-c"&gt;// 24&lt;/span&gt;
        .subFlowMapping(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;false&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, sf &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sf                        &lt;span class="pl-c"&gt;// 25&lt;/span&gt;
          .channel(c &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; c&lt;span class="pl-k"&gt;.&lt;/span&gt;queue(&lt;span class="pl-c1"&gt;10&lt;/span&gt;))
          .publishSubscribeChannel(c &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; c
            .subscribe(s &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;
              s&lt;span class="pl-k"&gt;.&lt;/span&gt;handle(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sleepUninterruptibly(&lt;span class="pl-c1"&gt;5&lt;/span&gt;, &lt;span class="pl-stj"&gt;TimeUnit&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;SECONDS&lt;/span&gt;)))&lt;span class="pl-c"&gt;// 26&lt;/span&gt;
            .subscribe(sub &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sub
              &lt;span class="pl-c1"&gt;.&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;String&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;transform(item &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="pl-stj"&gt;Thread&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;currentThread()&lt;span class="pl-k"&gt;.&lt;/span&gt;getName()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; prepared hot drink #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-v"&gt;this&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;hotDrinkCounter&lt;span class="pl-k"&gt;.&lt;/span&gt;incrementAndGet()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; for order #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; item&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;: &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; item)
              .handle(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(m&lt;span class="pl-k"&gt;.&lt;/span&gt;getPayload()))))))
      &lt;span class="pl-c1"&gt;.&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;Drink&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;transform(orderItem &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Drink&lt;/span&gt;(orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber(),
          orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getDrinkType(),
          orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;isIced(),
          orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getShots()))                                &lt;span class="pl-c"&gt;// 27&lt;/span&gt;
      .aggregate(aggregator &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; aggregator                       &lt;span class="pl-c"&gt;// 28&lt;/span&gt;
        .outputProcessor(group &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                               &lt;span class="pl-c"&gt;// 29&lt;/span&gt;
          &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Delivery&lt;/span&gt;(group&lt;span class="pl-k"&gt;.&lt;/span&gt;getMessages()
            .stream()
            .map(message &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; (&lt;span class="pl-stj"&gt;Drink&lt;/span&gt;) message&lt;span class="pl-k"&gt;.&lt;/span&gt;getPayload())
            .collect(&lt;span class="pl-stj"&gt;Collectors&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;toList())))                     &lt;span class="pl-c"&gt;// 30&lt;/span&gt;
        .correlationStrategy(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;
          ((&lt;span class="pl-stj"&gt;Drink&lt;/span&gt;) m&lt;span class="pl-k"&gt;.&lt;/span&gt;getPayload())&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber()), &lt;span class="pl-c1"&gt;null&lt;/span&gt;)     &lt;span class="pl-c"&gt;// 31&lt;/span&gt;
      .handle(&lt;span class="pl-stj"&gt;CharacterStreamWritingMessageHandler&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;stdout());   &lt;span class="pl-c"&gt;// 32&lt;/span&gt;
  }

}&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Examining the code line by line...&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line1"&gt;&lt;/a&gt;
1. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;SpringBootApplication&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;This new meta-annotation from Spring Boot 1.2. Includes &lt;code&gt;@Configuration&lt;/code&gt; and
&lt;code&gt;@EnableAutoConfiguration&lt;/code&gt;. Since we are in a Spring Integration application and Spring Boot has auto-configuration
for it, the &lt;code&gt;@EnableIntegration&lt;/code&gt; is automatically applied, to initialize the Spring Integration infrastructure including an
environment for the Java DSL - &lt;code&gt;DslIntegrationConfigurationInitializer&lt;/code&gt;, which is picked up by the
&lt;code&gt;IntegrationConfigurationBeanFactoryPostProcessor&lt;/code&gt; from &lt;code&gt;/META-INF/spring.factories&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line2"&gt;&lt;/a&gt;
2. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;IntegrationComponentScan&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The Spring Integration analogue of &lt;code&gt;@ComponentScan&lt;/code&gt; to scan components based on
interfaces, (the Spring Framework's &lt;code&gt;@ComponentScan&lt;/code&gt; only looks at classes). Spring Integration supports the discovery of interfaces
annotated with &lt;code&gt;@MessagingGateway&lt;/code&gt; (see #7 below).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line3"&gt;&lt;/a&gt;
3. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-stj"&gt;ConfigurableApplicationContext&lt;/span&gt; ctx &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-stj"&gt;SpringApplication&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;run(&lt;span class="pl-stj"&gt;Application&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class, args);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;main&lt;/code&gt; method of our class is designed to start the Spring Boot application using the
configuration from this class and starts an &lt;code&gt;ApplicationContext&lt;/code&gt; via Spring Boot. In addition, it delegates command
line arguments to the Spring Boot. For example you can specify &lt;code&gt;--debug&lt;/code&gt; to see logs for the boot auto-configuration report.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line4"&gt;&lt;/a&gt;
4. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-stj"&gt;Cafe&lt;/span&gt; cafe &lt;span class="pl-k"&gt;=&lt;/span&gt; ctx&lt;span class="pl-k"&gt;.&lt;/span&gt;getBean(&lt;span class="pl-stj"&gt;Cafe&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Since we already have an &lt;code&gt;ApplicationContext&lt;/code&gt; we can start to interact with application. And &lt;code&gt;Cafe&lt;/code&gt;
is that entry point - in EIP terms a &lt;code&gt;gateway&lt;/code&gt;. Gateways are simply interfaces and the application does not interact
with the Messaging API; it simply deals with the domain (see #7 below).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line5"&gt;&lt;/a&gt;
5.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;for&lt;/span&gt; (&lt;span class="pl-st"&gt;int&lt;/span&gt; i &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;; i &lt;span class="pl-k"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;100&lt;/span&gt;; i&lt;span class="pl-k"&gt;++&lt;/span&gt;) {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To demonstrate the cafe "work" we intiate 100 orders with two drinks - one hot and one iced. And send the &lt;code&gt;Order&lt;/code&gt; to the &lt;code&gt;Cafe&lt;/code&gt; gateway.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line6"&gt;&lt;/a&gt;
6.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Hit 'Enter' to terminate&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Typically Spring Integration application are asynchronous, hence to avoid early exit from the &lt;code&gt;main&lt;/code&gt; Thread we block the
&lt;code&gt;main&lt;/code&gt; method until some end-user interaction through the command line. Non daemon threads will keep the application
open but &lt;code&gt;System.read()&lt;/code&gt; provides us with a mechanism to close the application cleanly.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line7"&gt;&lt;/a&gt;
7. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;MessagingGateway&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The annotation to mark a business interface to indicate it is a &lt;code&gt;gateway&lt;/code&gt; between the
end-application and integration layer. It is an analogue of &lt;code&gt;&amp;lt;gateway /&amp;gt;&lt;/code&gt; component from Spring Integration XML
configuration. Spring Integration creates a &lt;code&gt;Proxy&lt;/code&gt; for this interface and populates it as a bean in the
application context. The purpose of this &lt;code&gt;Proxy&lt;/code&gt; is to wrap parameters in a &lt;code&gt;Message&amp;lt;?&amp;gt;&lt;/code&gt; object and send it to the
&lt;code&gt;MessageChannel&lt;/code&gt; according to the provided options.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line8"&gt;&lt;/a&gt;
8. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@Gateway(requestChannel &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;orders.input&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The method level annotation to distinct business logic by methods as well as by the target
integration flows. In this sample we use a &lt;code&gt;requestChannel&lt;/code&gt; reference of &lt;code&gt;orders.input&lt;/code&gt;, which is a &lt;code&gt;MessageChannel&lt;/code&gt;
bean name of our &lt;code&gt;IntegrationFlow&lt;/code&gt; input channel (see below #13).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line9"&gt;&lt;/a&gt;
9. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-st"&gt;void&lt;/span&gt; placeOrder(&lt;span class="pl-stj"&gt;Order&lt;/span&gt; order);&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The interface method is a central point to interact from end-application with the integration layer. This method has a
&lt;code&gt;void&lt;/code&gt; return type. It means that our integration flow is &lt;code&gt;one-way&lt;/code&gt; and we just send messages to the integration flow, but don't wait for a reply.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line10"&gt;&lt;/a&gt;
10. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt; hotDrinkCounter &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt;();
&lt;span class="pl-s"&gt;private&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt; coldDrinkCounter &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;AtomicInteger&lt;/span&gt;();&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Two counters to gather the information how our cafe works with drinks.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line11"&gt;&lt;/a&gt;
11.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@Bean(name &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-stj"&gt;PollerMetadata&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;DEFAULT_POLLER&lt;/span&gt;)
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;PollerMetadata&lt;/span&gt; poller() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;default&lt;/code&gt; &lt;code&gt;poller&lt;/code&gt; bean. It is a analogue of &lt;code&gt;&amp;lt;poller default="true"&amp;gt;&lt;/code&gt; component from Spring Integration XML configuration. Required for endpoints where the &lt;code&gt;inputChannel&lt;/code&gt; is a &lt;code&gt;PollableChannel&lt;/code&gt;. In this case, it is necessary for the
two Cafe &lt;code&gt;queues&lt;/code&gt; - hot and iced (see below #18). Here we use the &lt;code&gt;Pollers&lt;/code&gt; factory from the DSL project and use its
method-chain fluent API to build the poller metadata. Note that &lt;code&gt;Pollers&lt;/code&gt; can be used directly from an &lt;code&gt;IntegrationFlow&lt;/code&gt; definition,
if a specific &lt;code&gt;poller&lt;/code&gt; (rather than the default poller) is needed for an endpoint.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line12"&gt;&lt;/a&gt;
12. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;@&lt;span class="pl-stj"&gt;Bean&lt;/span&gt;
&lt;span class="pl-s"&gt;public&lt;/span&gt; &lt;span class="pl-stj"&gt;IntegrationFlow&lt;/span&gt; orders() {&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;IntegrationFlow&lt;/code&gt; bean definition. It is the central component of the Spring Integration Java DSL, although it does
 not play any role at runtime, just during the bean registration phase. All other code below registers Spring
 Integration components (&lt;code&gt;MessageChannel&lt;/code&gt;, &lt;code&gt;MessageHandler&lt;/code&gt;, &lt;code&gt;EventDrivenConsumer&lt;/code&gt;, &lt;code&gt;MessageProducer&lt;/code&gt;,
 &lt;code&gt;MessageSource&lt;/code&gt; etc.) in the &lt;code&gt;IntegrationFlow&lt;/code&gt; object, which is parsed by the &lt;code&gt;IntegrationFlowBeanPostProcessor&lt;/code&gt; to
 process those components and register them as beans in the application context as necessary (some elements, such as
 channels may already exist).&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line13"&gt;&lt;/a&gt;
13. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;return&lt;/span&gt; f &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; f&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;IntegrationFlow&lt;/code&gt; is a &lt;code&gt;Consumer&lt;/code&gt; functional interface, so we can minimize our code and concentrate just
only on the integration scenario requirements. Its &lt;code&gt;Lambda&lt;/code&gt; accepts &lt;code&gt;IntegrationFlowDefinition&lt;/code&gt; as an argument. This
class offers a comprehensive set of methods which can be composed to the &lt;code&gt;chain&lt;/code&gt;. We call these &lt;code&gt;EIP-methods&lt;/code&gt;,
because they provide implementations for EI patterns and populate components from Spring Integration Core. During the bean
registration phase, the &lt;code&gt;IntegrationFlowBeanPostProcessor&lt;/code&gt; converts this inline (Lambda) &lt;code&gt;IntegrationFlow&lt;/code&gt; to a
&lt;code&gt;StandardIntegrationFlow&lt;/code&gt; and processes its components. The same we can achieve using &lt;code&gt;IntegrationFlows&lt;/code&gt; factory
(e.g. &lt;code&gt;IntegrationFlow.from("channelX"). ... .get()&lt;/code&gt;), but
 we find the Lambda definition more elegant. An &lt;code&gt;IntegrationFlow&lt;/code&gt; definition using a Lambda populates &lt;code&gt;DirectChannel&lt;/code&gt;
 as an &lt;code&gt;inputChannel&lt;/code&gt; of the flow and it is registered in the application context as a bean with the name
 &lt;code&gt;orders.input&lt;/code&gt; in this our sample (&lt;code&gt;flow bean name + ".input"&lt;/code&gt;). That's why we use that name for the &lt;code&gt;Cafe&lt;/code&gt; gateway.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line14"&gt;&lt;/a&gt;
14.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.split(&lt;span class="pl-stj"&gt;Order&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;class, &lt;span class="pl-stj"&gt;Order&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;getItems)&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Since our integration flow accepts message through the &lt;code&gt;orders.input&lt;/code&gt; channel, we are ready to consume and process
 them. The first EIP-method in our scenario is &lt;code&gt;.split()&lt;/code&gt;. We know that the message &lt;code&gt;payload&lt;/code&gt; from &lt;code&gt;orders.input&lt;/code&gt;
 channel is an &lt;code&gt;Order&lt;/code&gt; domain object, so we can simply use its type here and use the Java 8 &lt;code&gt;method-reference&lt;/code&gt;
 feature. The first parameter is a type of message &lt;code&gt;payload&lt;/code&gt; we expect, and the second is a method reference to the
 &lt;code&gt;getItems()&lt;/code&gt; method, which returns &lt;code&gt;Collection&amp;lt;OrderItem&amp;gt;&lt;/code&gt;. So, this performs the &lt;code&gt;split&lt;/code&gt; EI pattern, when we send each
 collection entry as a separate message to the next channel. In the background, the &lt;code&gt;.split()&lt;/code&gt; method registers a
 &lt;code&gt;MethodInvokingSplitter&lt;/code&gt; &lt;code&gt;MessageHandler&lt;/code&gt; implementation and the &lt;code&gt;EventDrivenConsumer&lt;/code&gt; for that &lt;code&gt;MessageHandler&lt;/code&gt;, and
  wiring in the &lt;code&gt;orders.input&lt;/code&gt; channel as the &lt;code&gt;inputChannel&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line15"&gt;&lt;/a&gt;
15. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.channel(c &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; c&lt;span class="pl-k"&gt;.&lt;/span&gt;executor(&lt;span class="pl-stj"&gt;Executors&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;newCachedThreadPool()))&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.channel()&lt;/code&gt; EIP-method allows the specification of concrete &lt;code&gt;MessageChannel&lt;/code&gt;s between endpoints, as it is done via
&lt;code&gt;output-channel&lt;/code&gt;/&lt;code&gt;input-channel&lt;/code&gt; attributes pair with Spring Integration XML configuration. By default, endpoints in the
DSL integration flow definition are wired with &lt;code&gt;DirectChannel&lt;/code&gt;s, which get the bean names based on the &lt;code&gt;IntegrationFlow&lt;/code&gt;
bean name and &lt;code&gt;index&lt;/code&gt; in the flow chain. In this case we use another &lt;code&gt;Lambda&lt;/code&gt; expression, which selects a
specific &lt;code&gt;MessageChannel&lt;/code&gt; implementation from its &lt;code&gt;Channels&lt;/code&gt; factory and configures it with the fluent API. The current
channel here is an &lt;code&gt;ExecutorChannel&lt;/code&gt;, to allow to distribute messages from the &lt;code&gt;splitter&lt;/code&gt; to separate &lt;code&gt;Thread&lt;/code&gt;s, to process
them in parallel in the downstream flow.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line16"&gt;&lt;/a&gt;
16. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;.&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;Boolean&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;route(&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;isIced, mapping &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; mapping&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The next EIP-method in our scenario is &lt;code&gt;.route()&lt;/code&gt;, to send &lt;code&gt;hot/iced&lt;/code&gt; order items to different Cafe kitchens. We again
use here a method reference (&lt;code&gt;isIced()&lt;/code&gt;) to get the &lt;code&gt;routingKey&lt;/code&gt; from the incoming message. The second Lambda parameter
represents a &lt;code&gt;router mapping&lt;/code&gt; - something similar to &lt;code&gt;&amp;lt;mapping&amp;gt;&lt;/code&gt; sub-element for the &lt;code&gt;&amp;lt;router&amp;gt;&lt;/code&gt; component from
Spring Integration XML configuration. However since we are using Java we can go a bit further with its Lambda support!
The Spring Integration Java DSL introduced the &lt;code&gt;subflow&lt;/code&gt; definition for &lt;code&gt;router&lt;/code&gt;s in addition to traditional &lt;code&gt;channel
mapping&lt;/code&gt;. Each subflow is executed depending on the routing and, if the subflow produces a result, it is passed to the
next element in the flow definition after the router.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line17"&gt;&lt;/a&gt;
17. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.subFlowMapping(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;true&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, sf &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sf &lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Specifies the integration flow for the current router's &lt;code&gt;mappingKey&lt;/code&gt;. We have in
this samples two subflows - &lt;code&gt;hot&lt;/code&gt; and &lt;code&gt;iced&lt;/code&gt;. The subflow is the same &lt;code&gt;IntegrationFlow&lt;/code&gt; functional interface, therefore
we can use its Lambda exactly the same as we do on the top level &lt;code&gt;IntegrationFlow&lt;/code&gt; definition. The subflows don't
have any runtime dependency with its parent, it's just a logical relationship.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line18"&gt;&lt;/a&gt;
18. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.channel(c &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; c&lt;span class="pl-k"&gt;.&lt;/span&gt;queue(&lt;span class="pl-c1"&gt;10&lt;/span&gt;))&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We already know that a Lambda definition for the &lt;code&gt;IntegrationFlow&lt;/code&gt; starts from &lt;code&gt;[FLOW_BEAN_NAME].input&lt;/code&gt; &lt;code&gt;DirectChannel&lt;/code&gt;,
so it may be a question "how does it work here if we specify &lt;code&gt;.channel()&lt;/code&gt; again?". The DSL takes care of such a case
and wires those two channels with a &lt;code&gt;BridgeHandler&lt;/code&gt; and endpoint. In our sample, we use here a restricted
&lt;code&gt;QueueChannel&lt;/code&gt; to reflect the Cafe kitchen busy state from real life. And here is a place where we need that
&lt;code&gt;global poller&lt;/code&gt; for the next endpoint which is listening on this channel.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line19"&gt;&lt;/a&gt;
19. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.publishSubscribeChannel(c &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; c&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.publishSubscribeChannel()&lt;/code&gt; EIP-method is a variant of the &lt;code&gt;.channel()&lt;/code&gt; for a
&lt;code&gt;MessageChannels.publishSubscribe()&lt;/code&gt;, but with the &lt;code&gt;.subscribe()&lt;/code&gt; option when we can specify subflow as a subscriber to
the channel. Right, subflow one more time! So, subflows can be specified to any depth. Independently of the presence
&lt;code&gt;.subscribe()&lt;/code&gt; subflows, the next endpoint in the parent flow is also a subscriber to this &lt;code&gt;.publishSubscribeChannel()&lt;/code&gt;.
Since we are in the &lt;code&gt;.route()&lt;/code&gt; subflow already, the last subscriber is an implicit &lt;code&gt;BridgeHandler&lt;/code&gt; which just pops the
message to the top level - to a similar implicit &lt;code&gt;BridgeHandler&lt;/code&gt; to pop message to the next &lt;code&gt;.transform()&lt;/code&gt; endpoint in
the main flow. And one more note about this current position of our flow: the previous EIP-method is
&lt;code&gt;.channel(c -&amp;gt; c.queue(10))&lt;/code&gt; and this one is for &lt;code&gt;MessageChannel&lt;/code&gt; too. So, they are again tied with an implicit
&lt;code&gt;BridgeHandler&lt;/code&gt; as well. In a real application we could avoid this &lt;code&gt;.publishSubscribeChannel()&lt;/code&gt; just with the single
&lt;code&gt;.handle()&lt;/code&gt; for the Cafe kitchen, but our goal here to cover DSL features as much as possible. That's why we distribute
the kitchen work to several subflows for the same &lt;code&gt;PublishSubscribeChannel&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line20"&gt;&lt;/a&gt;
20. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.subscribe(s &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.subscribe()&lt;/code&gt; method accepts an &lt;code&gt;IntegrationFlow&lt;/code&gt; as parameter, which can be specified as Lambda to
configure subscriber as &lt;code&gt;subflow&lt;/code&gt;. We use here several subflow subscribers to avoid multi-line Lambdas and cover some
 DSL as we as Spring Integration capabilities.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line21"&gt;&lt;/a&gt;
21. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;s&lt;span class="pl-k"&gt;.&lt;/span&gt;handle(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sleepUninterruptibly(&lt;span class="pl-c1"&gt;1&lt;/span&gt;, &lt;span class="pl-stj"&gt;TimeUnit&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;SECONDS&lt;/span&gt;)))&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here we use a simple &lt;code&gt;.handle()&lt;/code&gt; EIP-method just to block the current Thread for some timeout to demonstrate how
quickly the Cafe kitchen prepares a drink. Here we use Google Guava &lt;code&gt;Uninterruptibles.sleepUninterruptibly&lt;/code&gt;, to
avoid using a &lt;code&gt;try...catch&lt;/code&gt; block within the Lambda expression, although you can do that and your Lambda will
be multi-line. Or you can move that code to a separate method and use it here as &lt;code&gt;method reference&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Since we don't
use any &lt;code&gt;Executor&lt;/code&gt; on the &lt;code&gt;.publishSubscribeChannel()&lt;/code&gt; all subscribers will beperformed sequentially on the same
Thread; in our case it is one of &lt;code&gt;TaskScheduler&lt;/code&gt;'s Threads from &lt;code&gt;poller&lt;/code&gt; on the previous &lt;code&gt;QueueChannel&lt;/code&gt;. That's why
this &lt;code&gt;sleep&lt;/code&gt; blocks all downstream process and allows to demonstrate the &lt;code&gt;busy state&lt;/code&gt; for that restricted to 10
&lt;code&gt;QueueChannel&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line22"&gt;&lt;/a&gt;
22. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.subscribe(sub &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sub&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The next subflow subscriber which will be performed only after that &lt;code&gt;sleep&lt;/code&gt; with 1 second for &lt;code&gt;iced&lt;/code&gt; drink. We
use here one more subflow because &lt;code&gt;.handle()&lt;/code&gt; of previous one is &lt;code&gt;one-way&lt;/code&gt; with the nature of the Lambda for
&lt;code&gt;MessageHandler&lt;/code&gt;. That's why, to go ahead with process of our whole flow, we have several subscribers: some of subflows
finish after their work and don't return anything to the parent flow.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line23"&gt;&lt;/a&gt;
23. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt; &lt;span class="pl-c1"&gt;.&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;String&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;transform(item &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="pl-stj"&gt;Thread&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;currentThread()&lt;span class="pl-k"&gt;.&lt;/span&gt;getName()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; prepared cold drink #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-v"&gt;this&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;coldDrinkCounter&lt;span class="pl-k"&gt;.&lt;/span&gt;incrementAndGet()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; for order #&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; item&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber()
                  &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;: &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; item)         &lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;transformer&lt;/code&gt; in the current subscriber subflow is to convert the &lt;code&gt;OrderItem&lt;/code&gt; to the friendly STDOUT message for
the next &lt;code&gt;.handle&lt;/code&gt;. Here we see the use of generics with the Lambda expression. This is implemented using the
&lt;code&gt;GenericTransformer&lt;/code&gt; functional interface.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line24"&gt;&lt;/a&gt;
24. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.handle(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-stj"&gt;System&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;out&lt;span class="pl-k"&gt;.&lt;/span&gt;println(m&lt;span class="pl-k"&gt;.&lt;/span&gt;getPayload())))))&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.handle()&lt;/code&gt; here just to demonstrate how to use Lambda expression to print the &lt;code&gt;payload&lt;/code&gt; to STDOUT.
It is a signal that our drink is ready. After that the final (implicit) subscriber to the
&lt;code&gt;PublishSubscribeChannel&lt;/code&gt; just sends the message with the &lt;code&gt;OrderItem&lt;/code&gt; to the &lt;code&gt;.transform()&lt;/code&gt; in the main flow.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line25"&gt;&lt;/a&gt;
25. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.subFlowMapping(&lt;span class="pl-s1"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;false&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, sf &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sf&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.subFlowMapping()&lt;/code&gt; for the &lt;code&gt;hot&lt;/code&gt; drinks. Actually it is similar to the previous &lt;code&gt;iced&lt;/code&gt; drinks subflow, but
with specific &lt;code&gt;hot&lt;/code&gt; business logic.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line26"&gt;&lt;/a&gt;
26. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;s&lt;span class="pl-k"&gt;.&lt;/span&gt;handle(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; sleepUninterruptibly(&lt;span class="pl-c1"&gt;5&lt;/span&gt;, &lt;span class="pl-stj"&gt;TimeUnit&lt;/span&gt;&lt;span class="pl-c1"&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;SECONDS&lt;/span&gt;)))&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;sleepUninterruptibly&lt;/code&gt; for &lt;code&gt;hot&lt;/code&gt; drinks. Right, we need more time to boil the water!&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line27"&gt;&lt;/a&gt;
27. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt; &lt;span class="pl-c1"&gt;.&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-stj"&gt;OrderItem&lt;/span&gt;, &lt;span class="pl-stj"&gt;Drink&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;transform(orderItem &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Drink&lt;/span&gt;(orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber(),
          orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getDrinkType(),
          orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;isIced(),
          orderItem&lt;span class="pl-k"&gt;.&lt;/span&gt;getShots()))      &lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The main &lt;code&gt;OrderItem&lt;/code&gt; to &lt;code&gt;Drink&lt;/code&gt; &lt;code&gt;transformer&lt;/code&gt;, which is performed when the &lt;code&gt;.route()&lt;/code&gt; subflow returns its result
after the Cafe kitchen subscribers have finished preparing the drink.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line28"&gt;&lt;/a&gt;
28. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.aggregate(aggregator &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; aggregator&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.aggregate()&lt;/code&gt; EIP-method provides similar options to configure an &lt;code&gt;AggregatingMessageHandler&lt;/code&gt; and its endpoint,
like we can do with the &lt;code&gt;&amp;lt;aggregator&amp;gt;&lt;/code&gt; component when using Spring Integration XML configuration. Of course, with the Java DSL
we have more power to configure the aggregator just in place, without any other extra beans. And Lambdas come to the rescue again!
From the Cafe business logic perspective we compose the &lt;code&gt;Delivery&lt;/code&gt; for the initial &lt;code&gt;Order&lt;/code&gt;, since we &lt;code&gt;.split()&lt;/code&gt; the original order
to the &lt;code&gt;OrderItem&lt;/code&gt;s near the beginning.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line29"&gt;&lt;/a&gt;
29. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.outputProcessor(group &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.outputProcessor()&lt;/code&gt; of the &lt;code&gt;AggregatorSpec&lt;/code&gt; allows us to emit a custom result after aggregator completes the
group. It's an analogue of &lt;code&gt;ref&lt;/code&gt;/&lt;code&gt;method&lt;/code&gt; from the &lt;code&gt;&amp;lt;aggregator&amp;gt;&lt;/code&gt; component or the &lt;code&gt;@Aggregator&lt;/code&gt; annotation on a POJO method.
Our goal here to compose a &lt;code&gt;Delivery&lt;/code&gt; for all &lt;code&gt;Drink&lt;/code&gt;s.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line30"&gt;&lt;/a&gt;
30. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;new&lt;/span&gt; &lt;span class="pl-stj"&gt;Delivery&lt;/span&gt;(group&lt;span class="pl-k"&gt;.&lt;/span&gt;getMessages()
            .stream()
            .map(message &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; (&lt;span class="pl-stj"&gt;Drink&lt;/span&gt;) message&lt;span class="pl-k"&gt;.&lt;/span&gt;getPayload())
            .collect(&lt;span class="pl-stj"&gt;Collectors&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;toList())))    &lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As you see we use here the Java 8 &lt;code&gt;Stream&lt;/code&gt; feature for &lt;code&gt;Collection&lt;/code&gt;. We iterate over messages from the released &lt;code&gt;MessageGroup&lt;/code&gt;
 and convert (&lt;code&gt;map&lt;/code&gt;) each of them to its &lt;code&gt;Drink&lt;/code&gt; &lt;code&gt;payload&lt;/code&gt;. The result of the &lt;code&gt;Stream&lt;/code&gt; (&lt;code&gt;.collect()&lt;/code&gt;) (a list of &lt;code&gt;Drink&lt;/code&gt;s) is passed to the
&lt;code&gt;Delivery&lt;/code&gt; constructor. The &lt;code&gt;Message&lt;/code&gt; with this new &lt;code&gt;Delivery&lt;/code&gt; payload is sent to the next endpoint in our Cafe scenario.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line31"&gt;&lt;/a&gt;
31.&lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.correlationStrategy(m &lt;span class="pl-k"&gt;-&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;
          ((&lt;span class="pl-stj"&gt;Drink&lt;/span&gt;) m&lt;span class="pl-k"&gt;.&lt;/span&gt;getPayload())&lt;span class="pl-k"&gt;.&lt;/span&gt;getOrderNumber()), &lt;span class="pl-c1"&gt;null&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;.correlationStrategy()&lt;/code&gt; Lambda demonstrates how we can customize an aggregator behaviour. Of course, we can
rely here just only on a built-in &lt;code&gt;SequenceDetails&lt;/code&gt; from Spring Integration, which is populated by default from
&lt;code&gt;.split()&lt;/code&gt; in the beginning of our flow to each split message, but the Lambda sample for the &lt;code&gt;CorrelationStrategy&lt;/code&gt;
is included for illustration. (With XML, we could have used a &lt;code&gt;correlation-expression&lt;/code&gt; or a custom
&lt;code&gt;CorrelationStrategy&lt;/code&gt;). The second argument in this line for the &lt;code&gt;.aggregate()&lt;/code&gt; EIP-method is for the &lt;code&gt;endpointConfigurer&lt;/code&gt; to
customize options like &lt;code&gt;autoStartup&lt;/code&gt;, &lt;code&gt;requiresReply&lt;/code&gt;, &lt;code&gt;adviceChain&lt;/code&gt; etc. We use here &lt;code&gt;null&lt;/code&gt; to show that we rely
on the default options for the endpoint. Many of EIP-methods provide overloaded versions with and without
&lt;code&gt;endpointConfigurer&lt;/code&gt;, but &lt;code&gt;.aggregate()&lt;/code&gt; requires an endpoint argument, to avoid an explicit cast for the
&lt;code&gt;AggregatorSpec&lt;/code&gt; Lambda argument.&lt;/p&gt;

&lt;p&gt;&lt;a name="user-content-line32"&gt;&lt;/a&gt;
32. &lt;/p&gt;

&lt;div class="highlight highlight-java"&gt;&lt;pre&gt;.handle(&lt;span class="pl-stj"&gt;CharacterStreamWritingMessageHandler&lt;/span&gt;&lt;span class="pl-k"&gt;.&lt;/span&gt;stdout());&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It is the end of our flow - the &lt;code&gt;Delivery&lt;/code&gt; is delivered to the client! We just print here the message &lt;code&gt;payload&lt;/code&gt;
to STDOUT using out-of-the-box &lt;code&gt;CharacterStreamWritingMessageHandler&lt;/code&gt; from Spring Integration Core. This is a
case to show how existing components from Spring Integration Core (and its modules) can be used from the Java DSL.&lt;/p&gt;

&lt;p&gt;Well, we have finished describing the Cafe Demo sample based on the Spring Integration Java DSL.
Compare it with &lt;a href="https://github.com/spring-projects/spring-integration-samples/tree/master/applications/cafe/cafe-si"&gt;XML sample&lt;/a&gt;
to get more information regarding Spring Integration.&lt;/p&gt;

&lt;p&gt;This is not an overall tutorial to the DSL stuff. We don't review here the &lt;code&gt;endpointConfigurer&lt;/code&gt; options, &lt;code&gt;Transformers&lt;/code&gt;
factory, the &lt;code&gt;IntegrationComponentSpec&lt;/code&gt; hierarchy, the &lt;code&gt;NamespaceFactories&lt;/code&gt;, how we can specify several
&lt;code&gt;IntegrationFlow&lt;/code&gt; beans and wire them to a single application etc., see the
&lt;a href="https://github.com/spring-projects/spring-integration-java-dsl/wiki/Spring-Integration-Java-DSL-Reference"&gt;Reference Manual&lt;/a&gt;
for more information.&lt;/p&gt;

&lt;p&gt;At least this line-by-line tutorial should show you Spring Integration Java DSL basics and its seamless fusion between
Spring Framework Java &amp;amp; Annotation configuration, Spring Integration foundation and Java 8 Lambda support!&lt;/p&gt;

&lt;p&gt;Also see the &lt;a href="https://github.com/spring-projects/spring-integration-samples/tree/master/dsl/si4demo"&gt;si4demo&lt;/a&gt; to
see the evolution of Spring Integration including the Java DSL, as shown at the 2014 SpringOne/2GX Conference. (Video should be available soon).&lt;/p&gt;

&lt;p&gt;As always, we look forward to your comments and feedback (&lt;a href="http://stackoverflow.com"&gt;StackOverflow&lt;/a&gt;
(&lt;code&gt;spring-integration&lt;/code&gt; tag), &lt;a href="https://jira.spring.io/browse/INTEXT"&gt;Spring JIRA&lt;/a&gt;,
&lt;a href="https://github.com/spring-projects/spring-integration-java-dsl/issues"&gt;GitHub&lt;/a&gt;) and we very much welcome
&lt;a href="https://github.com/spring-projects/spring-integration/blob/master/CONTRIBUTING.md"&gt;contributions&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;P.S. Even if this tutorial is fully based on the Java 8 Lambda support, we don't want to miss pre Java 8 users, we are going to provide similar non-Lambda blog post. Stay tuned!&lt;/p&gt;</content>
  </entry>
  <entry>
    <title>Spring Cloud 1.0.0.M3 Available Now</title>
    <link rel="alternate" href="https://spring.io/blog/2014/11/25/spring-cloud-1-0-0-m3-available-now" />
    <category term="releases" label="Releases" />
    <author>
      <name>Dave Syer</name>
    </author>
    <id>tag:spring.io,2014-11-25:1861</id>
    <updated>2014-11-25T09:23:00Z</updated>
    <content type="html">&lt;p&gt;&lt;a href="http://projects.spring.io/spring-cloud"&gt;Spring Cloud&lt;/a&gt; 1.0.0.M3 is available now in the repo.spring.io repository. The following projects all had a 1.0.0.M3 release:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Spring Cloud Config: centralized key-value (or YAML) configuration management. Now supports the config server being fully embedded in another application.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spring Cloud Netflix. Also has better support for embeddability of the server components. Now also properly records load balancer statistics in Ribbon-enabled Spring &lt;code&gt;RestTemplate&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spring Cloud for Amazon Web Services. Has new Spring Boot integration points, externalizing configuration for AWS metadata.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spring Cloud Security: super simple OAuth2 in a declarative style.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spring Cloud Bus: broadcasts framework-level events to Spring Cloud components. Big news here is that we now have a &lt;a href="https://github.com/spring-cloud/spring-cloud-bus/tree/master/spring-cloud-bus-turbine"&gt;RabbitMQ-based aggregator&lt;/a&gt; for Hystrix metrics (based on Turbine 2), so you don't have to rely on having direct HTTP access to all service instances.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spring Cloud CLI: Groovy CLI for writing microservices in self-contained scripts.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spring Cloud for Cloud Foundry: now bridges between Spring Cloud Security and Cloud Foundry service bindings, making it super easy to do Single Sign On and OAutth2 protected resources in Cloud Foundry.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;All these modules now depend on Spring Boot 1.2.0.RC2 with the intention that we move to 1.2.0.RELEASE when it becomes available. Together with the starters (dependency management helpers, also released now at 1.0.0.M3) these represent almost all of Spring Cloud, with the exception of Spring Cloud Connectors, which should see a 1.1.1 release soon.&lt;/p&gt;

&lt;p&gt;We are making good progress towards a release candidate for 1.0.0 in December, and would like to thank the community for contributing on github and getting involved by trying out the early milestones.&lt;/p&gt;</content>
  </entry>
</feed>

